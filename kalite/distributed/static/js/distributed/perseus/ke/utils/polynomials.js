(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
$.extend(KhanUtil,{expr:function(e,r){if("object"==typeof e){var t=e[0],n=e.slice(1),a=r?KhanUtil.computeOperators:KhanUtil.formatOperators;return a[t].apply(this,n)}return r?e:e.toString()},exprType:function(e){return"object"==typeof e?"color"===e[0]?KhanUtil.exprType(e[2]):e[0]:typeof e},exprIsNegated:function(e){switch(KhanUtil.exprType(e)){case"color":return KhanUtil.exprIsNegated(e[2]);case"/":return KhanUtil.exprIsNegated(e[1]);case"+":case"-":return!0;case"number":return 0>e;case"string":return"-"===e.charAt(0);default:return!1}},exprIsShort:function(e){switch(KhanUtil.exprType(e)){case"color":return KhanUtil.exprIsShort(e[2]);case"+":case"-":case"*":case"/":case"frac":return!1;case"^":return"number"!==KhanUtil.exprType(e[1])||e[1]<0;case"number":case"sqrt":return!0;default:return e.length<=1}},exprParenthesize:function(e){return KhanUtil.exprIsShort(e)?KhanUtil.expr(e):"("+KhanUtil.expr(e)+")"},formatOperators:{color:function(e,r){return"\\color{"+e+"}{"+KhanUtil.expr(r)+"}"},"+":function(){var e=[].slice.call(arguments,0),r=$.grep(e,function(e,r){return null!=e});r=_.filter(r,function(e){return""+KhanUtil.expr(e)!="0"}),r=$.map(r,function(e,r){var t;switch(KhanUtil.exprType(e)){case"+":t=!0;break;case"-":t=e.length>2;break;default:t=!1}return e=KhanUtil.expr(e),t&&(e="("+e+")"),("-"!==e.charAt(0)||t)&&(e="+"+e),e});var t=r.join("");return"+"===t.charAt(0)?t.slice(1):t},"-":function(){if(1===arguments.length)return KhanUtil.expr(["*",-1,arguments[0]]);var e=[].slice.call(arguments,0),r=$.map(e,function(e,r){var t,n=KhanUtil.exprIsNegated(e);switch(KhanUtil.exprType(e)){case"+":case"-":t=!0;break;default:t=!1}return e=KhanUtil.expr(e),(n&&r>0||t)&&(e="("+e+")"),e}),t=r.join("-");return t},"*":function(){var e=Array.prototype.slice.call(arguments,1);if(e.unshift("*"),0===arguments[0])return 0;if(1===arguments[0]&&e.length>1)return KhanUtil.expr(e);if(-1===arguments[0]&&e.length>1){var r=KhanUtil.expr(e);return KhanUtil.exprIsNegated(e[1])?"-("+r+")":"-"+r}if(arguments.length>1){var t=[].slice.call(arguments,0),n="number"===KhanUtil.exprType(arguments[0])&&"number"===KhanUtil.exprType(arguments[1]),a=$.map(t,function(e,r){var t;switch(KhanUtil.exprType(e)){case"number":r>0&&(t=!0);break;default:t=!KhanUtil.exprIsShort(e)}return n=n||t,e=KhanUtil.expr(e),n&&(e="("+e+")"),e});return a.join("")}return KhanUtil.expr(arguments[0])},times:function(e,r){var t=!KhanUtil.exprIsShort(e),n=!KhanUtil.exprIsShort(r);return e=KhanUtil.expr(e),r=KhanUtil.expr(r),e=t?"("+e+")":e,r=n?"("+r+")":r,e+" \\times "+r},dot:function(e,r){var t=!KhanUtil.exprIsShort(e),n=!KhanUtil.exprIsShort(r);return e=KhanUtil.expr(e),r=KhanUtil.expr(r),e=t?"("+e+")":e,r=n?"("+r+")":r,e+" \\cdot "+r},"/":function(e,r){var t=!KhanUtil.exprIsShort(e),n=!KhanUtil.exprIsShort(r);return e=KhanUtil.expr(e),r=KhanUtil.expr(r),e=t?"("+e+")":e,r=n?"("+r+")":r,e+"/"+r},frac:function(e,r){return"\\dfrac{"+KhanUtil.expr(e)+"}{"+KhanUtil.expr(r)+"}"},"^":function(e,r){if(0===r)return"";if(1===r)return KhanUtil.expr(e);var t,n;switch(KhanUtil.exprType(e)){case"+":case"-":case"*":case"/":case"^":case"ln":t=!0;break;case"number":t=0>e;break;case"sin":case"cos":case"tan":case"csc":case"sec":case"cot":t=!1,n=!0;break;default:t=!1,n=!1}return e=KhanUtil.expr(e),t&&(e="("+e+")"),r=KhanUtil.expr(r),n?e.replace(/\\(\S+?)\{/,function(e,t){return"\\"+t+"^{"+r+"} {"}):e+"^{"+r+"}"},sqrt:function(e){return"\\sqrt{"+KhanUtil.exprParenthesize(e)+"}"},sin:function(e){return"\\sin{"+KhanUtil.exprParenthesize(e)+"}"},cos:function(e){return"\\cos{"+KhanUtil.exprParenthesize(e)+"}"},tan:function(e){return"\\tan{"+KhanUtil.exprParenthesize(e)+"}"},sec:function(e){return"\\sec{"+KhanUtil.exprParenthesize(e)+"}"},csc:function(e){return"\\sec{"+KhanUtil.exprParenthesize(e)+"}"},cot:function(e){return"\\sec{"+KhanUtil.exprParenthesize(e)+"}"},ln:function(e){return"\\ln{"+KhanUtil.exprParenthesize(e)+"}"},"+-":function(){if(1===arguments.length)return"\\pm "+KhanUtil.exprParenthesize(arguments[0]);var e=[].slice.call(arguments,0);return $.map(e,function(e,r){return KhanUtil.expr(e)}).join(" \\pm ")}},computeOperators:{color:function(e,r){return KhanUtil.expr(r,!0)},"+":function(){var e=[].slice.call(arguments,0),r=0;return $.each(e,function(e,t){r+=KhanUtil.expr(t,!0)}),r},"-":function(){if(1===arguments.length)return-KhanUtil.expr(arguments[0],!0);var e=[].slice.call(arguments,0),r=0;return $.each(e,function(e,t){r+=(0===e?1:-1)*KhanUtil.expr(t,!0)}),r},"*":function(){var e=[].slice.call(arguments,0),r=1;return $.each(e,function(e,t){r*=KhanUtil.expr(t,!0)}),r},"/":function(){var e=[].slice.call(arguments,0),r=1;return $.each(e,function(e,t){var n=KhanUtil.expr(t,!0);r*=0===e?n:1/n}),r},"^":function(e,r){return Math.pow(KhanUtil.expr(e,!0),KhanUtil.expr(r,!0))},sqrt:function(e){return Math.sqrt(KhanUtil.expr(e,!0))},"+-":function(){return NaN}},exprStripColor:function(e){return"object"!=typeof e?e:"color"===e[0]?KhanUtil.exprStripColor(e[2]):$.map(e,function(e,r){return[0===r?e:KhanUtil.exprStripColor(e)]})},exprSimplifyAssociative:function(e){if("object"!=typeof e)return e;var r=$.map(e.slice(1),function(e){return[KhanUtil.exprSimplifyAssociative(e)]}),t=function(r){switch(e[0]){case"+":if("+"===r[0])return r.slice(1);break;case"*":if("*"===r[0])return r.slice(1)}return[r]},n=$.map(r,t);return n.unshift(e[0]),n}}),KhanUtil.computeOperators.frac=KhanUtil.computeOperators["/"];
},{}],2:[function(require,module,exports){
var DEFAULT_TOLERANCE=1e-9,EPSILON=Math.pow(2,-42),knumber=KhanUtil.knumber={DEFAULT_TOLERANCE:DEFAULT_TOLERANCE,EPSILON:EPSILON,is:function(n){return _.isNumber(n)&&!_.isNaN(n)},equal:function(n,r,u){return null==n||null==r?n===r:(null==u&&(u=DEFAULT_TOLERANCE),Math.abs(n-r)<u)},sign:function(n,r){return knumber.equal(n,0,r)?0:Math.abs(n)/n},round:function(n,r){var u=Math.pow(10,r);return Math.round(n*u)/u},roundTo:function(n,r){return Math.round(n/r)*r},floorTo:function(n,r){return Math.floor(n/r)*r},ceilTo:function(n,r){return Math.ceil(n/r)*r},isInteger:function(n,r){return knumber.equal(Math.round(n),n,r)},toFraction:function(n,r,u){u=u||1e3,r=r||EPSILON;for(var t=[1,0],o=[0,1],e=Math.floor(n),a=n-e;o[0]<=u;){if(knumber.equal(t[0]/o[0],n,r))return[t[0],o[0]];t=[e*t[0]+t[1],t[0]],o=[e*o[0]+o[1],o[0]],e=Math.floor(1/a),a=1/a-e}return[n,1]}};module.exports=knumber;
},{}],3:[function(require,module,exports){
require("../third_party/raphael.js");var knumber=require("./knumber.js");$.extend(KhanUtil,{cleanMath:function(n){return"string"==typeof n?n.replace(/\+\s*-/g,"- ").replace(/-\s*-/g,"+ ").replace(/\^1/g,""):n},rand:function(n){return Math.floor(n*KhanUtil.random())},digits:function(n){if(0===n)return[0];for(var r=[];n>0;)r.push(n%10),n=Math.floor(n/10);return r},integerToDigits:function(n){return KhanUtil.digits(n).reverse()},decimalDigits:function(n){var r=""+Math.abs(n);r=r.replace(".","");for(var t=[],e=r.length;e>0;e--)t.push(r.charAt(e-1));return t},decimalPlaces:function(n){var r=""+Math.abs(n);return r=r.split("."),1===r.length?0:r[1].length},digitsToInteger:function(n){var r=Math.floor(Math.pow(10,n.length-1)),t=0;return $.each(n,function(n,e){t+=e*r,r/=10}),t},padDigitsToNum:function(n,r){for(n=n.slice(0);n.length<r;)n.push(0);return n},placesLeftOfDecimal:[$._("one"),$._("ten"),$._("hundred"),$._("thousand")],placesRightOfDecimal:[$._("one"),$._("tenth"),$._("hundredth"),$._("thousandth"),$._("ten thousandth")],powerToPlace:function(n){return 0>n?KhanUtil.placesRightOfDecimal[-1*n]:KhanUtil.placesLeftOfDecimal[n]},roundTowardsZero:function(n){return 0>n?Math.ceil(n-.001):Math.floor(n+.001)},bound:function(n){return 0===n?n:0>n?-KhanUtil.bound(-n):Math.max(1e-6,Math.min(n,1e20))},factorial:function(n){return 1>=n?n:n*KhanUtil.factorial(n-1)},getGCD:function(n,r){if(arguments.length>2){var t=[].slice.call(arguments,1);return KhanUtil.getGCD(n,KhanUtil.getGCD.apply(KhanUtil,t))}var e;for(n=Math.abs(n),r=Math.abs(r);r;)e=n%r,n=r,r=e;return n},getLCM:function(n,r){if(arguments.length>2){var t=[].slice.call(arguments,1);return KhanUtil.getLCM(n,KhanUtil.getLCM.apply(KhanUtil,t))}return Math.abs(n*r)/KhanUtil.getGCD(n,r)},primes:[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97],denominators:[2,3,4,5,6,8,10,12,100],smallDenominators:[2,3,4,5,6,8,10,12],getPrime:function(){return KhanUtil.primes[KhanUtil.rand(KhanUtil.primes.length)]},isPrime:function(n){if(1>=n)return!1;if(101>n)return!!$.grep(KhanUtil.primes,function(r,t){return Math.abs(r-n)<=.5}).length;if(1>=n||n>2&&n%2===0)return!1;for(var r=3,t=Math.sqrt(n);t>=r;r+=2)if(n%r===0)return!1;return!0},isOdd:function(n){return n%2===1},isEven:function(n){return n%2===0},getOddComposite:function(n,r){void 0===n&&(n=0),void 0===r&&(r=100);var t=[9,15,21,25,27,33,35,39,45,49,51,55];t=t.concat([57,63,65,69,75,77,81,85,87,91,93,95,99]);for(var e=-1;n>e||e>r;)e=t[KhanUtil.rand(t.length)];return e},getEvenComposite:function(n,r){void 0===n&&(n=0),void 0===r&&(r=100);var t=[4,6,8,10,12,14,16,18,20,22,24,26];t=t.concat([28,30,32,34,36,38,40,42,44,46,48]),t=t.concat([50,52,54,56,58,60,62,64,66,68,70,72]),t=t.concat([74,76,78,80,82,84,86,88,90,92,94,96,98]);for(var e=-1;n>e||e>r;)e=t[KhanUtil.rand(t.length)];return e},getComposite:function(){return KhanUtil.randRange(0,1)?KhanUtil.getEvenComposite():KhanUtil.getOddComposite()},getPrimeFactorization:function(n){if(1===n)return[];if(KhanUtil.isPrime(n))return[n];for(var r=Math.sqrt(n),t=2;r>=t;t++)if(n%t===0)return $.merge(KhanUtil.getPrimeFactorization(t),KhanUtil.getPrimeFactorization(n/t))},getFactors:function(n){for(var r=[],t=function(n){-1===_(r).indexOf(n)&&r.push(n)},e=n,a=1;e>=a*a;a++)n%a===0&&(t(a),t(n/a));return KhanUtil.sortNumbers(r)},getNontrivialFactor:function(n){var r=KhanUtil.getFactors(n);return r[KhanUtil.randRange(1,r.length-2)]},getMultiples:function(n,r){for(var t=[],e=1;r>=e*n;e++)t.push(e*n);return t},splitRadical:function(n){if(0===n)return[0,1];for(var r=1,t=n,e=2;n>=e*e;e++)for(;t%(e*e)===0;)t/=e*e,r*=e;return[r,t]},splitCube:function(n){if(0===n)return[0,1];for(var r=1,t=n,e=2;n>=e*e*e;e++)for(;t%(e*e*e)===0;)t/=e*e*e,r*=e;return[r,t]},randRange:function(n,r){var t=[].slice.call(arguments,2);if(0===t.length)return Math.floor(KhanUtil.rand(r-n+1))+n;var e=[n,r].concat(t.slice(1));return $.map(new Array(t[0]),function(){return[KhanUtil.randRange.apply(null,e)]})},randRangeUnique:function(n,r,t){if(null==t)return KhanUtil.randRange(n,r);for(var e=[],a=n;r>=a;a++)e.push(a);return KhanUtil.shuffle(e,t)},randRangeUniqueNonZero:function(n,r,t){if(null==t)return KhanUtil.randRangeNonZero(n,r);for(var e=[],a=n;r>=a;a++)0!==a&&e.push(a);return KhanUtil.shuffle(e,t)},randRangeWeighted:function(n,r,t,e){return KhanUtil.random()<e||t===n&&t===r?t:KhanUtil.randRangeExclude(n,r,[t])},randRangeExclude:function(n,r,t){var e;do e=KhanUtil.randRange(n,r);while(-1!==_(t).indexOf(e));return e},randRangeWeightedExclude:function(n,r,t,e,a){var i;do i=KhanUtil.randRangeWeighted(n,r,t,e);while(-1!==_(a).indexOf(i));return i},randRangeNonZero:function(n,r){return KhanUtil.randRangeExclude(n,r,[0])},randFromArray:function(n,r){return null==r?n[KhanUtil.rand(n.length)]:$.map(new Array(r),function(){return KhanUtil.randFromArray(n)})},randFromArrayExclude:function(n,r){for(var t=[],e=0;e<n.length;e++)-1===_(r).indexOf(n[e])&&t.push(n[e]);return KhanUtil.randFromArray(t)},roundToNearest:function(n,r){return Math.round(r/n)*n},roundTo:function(n,r){var t=Math.pow(10,n).toFixed(5);return Math.round((r*t).toFixed(5))/t},toFixedApprox:function(n,r){var t=n.toFixed(r);return knumber.equal(+t,n)?t:"\\approx "+t},roundToApprox:function(n,r){var t=KhanUtil.roundTo(r,n);return knumber.equal(t,n)?String(t):KhanUtil.toFixedApprox(n,r)},floorTo:function(n,r){var t=Math.pow(10,n).toFixed(5);return Math.floor((r*t).toFixed(5))/t},ceilTo:function(n,r){var t=Math.pow(10,n).toFixed(5);return Math.ceil((r*t).toFixed(5))/t},toFraction:function(n,r){if(null==r&&(r=Math.pow(2,-46)),0>n||n>1){var t=n%1;t+=0>t?1:0;var e=KhanUtil.toFraction(t,r);return e[0]+=Math.round(n-t)*e[1],e}if(Math.abs(Math.round(Number(n))-n)<=r)return[Math.round(n),1];for(var a=0,i=1,o=1,u=1,l=1,c=2;;){if(Math.abs(Number(l/c)-n)<=r)return[l,c];n>l/c?(a=l,i=c):(o=l,u=c),l=a+o,c=i+u}},getNumericFormat:function(n){if(n=$.trim(n),n=n.replace(/\u2212/,"-").replace(/([+-])\s+/g,"$1"),n.match(/^[+-]?\d+$/))return"integer";if(n.match(/^[+-]?\d+\s+\d+\s*\/\s*\d+$/))return"mixed";var r=n.match(/^[+-]?(\d+)\s*\/\s*(\d+)$/);return r?parseFloat(r[1])>parseFloat(r[2])?"improper":"proper":n.replace(/[,. ]/g,"").match(/^\d+$/)?"decimal":n.match(/(pi?|\u03c0|t(?:au)?|\u03c4|pau)/)?"pi":null},toNumericString:function(n,r){if(null==n)return"";if(0===n)return"0";if("percent"===r)return 100*n+"%";if("pi"===r){var t=knumber.toFraction(n/Math.PI),e=Math.abs(t[0]),a=t[1];if(knumber.isInteger(e)){var i=0>n?"-":"",o="π";return i+(1===e?"":e)+o+(1===a?"":"/"+a)}}if(_(["proper","improper","mixed","fraction"]).contains(r)){var t=knumber.toFraction(n),e=Math.abs(t[0]),a=t[1],i=0>n?"-":"";if(1===a)return i+e;if("mixed"===r){var u=e%a,l=(e-u)/a;return i+(l?l+" ":"")+u+"/"+a}return i+e+"/"+a}return String(n)},shuffle:function(n,r){n=[].slice.call(n,0);for(var t="undefined"==typeof r||r>n.length?0:n.length-r,e=n.length;e>t;e--){var a=Math.floor(KhanUtil.random()*e),i=n[a];n[a]=n[e-1],n[e-1]=i}return n.slice(t)},sortNumbers:function(n){return n.slice(0).sort(function(n,r){return n-r})},truncate_to_max:function(n,r){return parseFloat(n.toFixed(r))},isInt:function(n){return parseFloat(n)===parseInt(n,10)&&!isNaN(n)},colorMarkup:function(n,r){return"\\color{"+r+"}{"+n+"}"},contains:function(n,r){return _.any(n,function(n){return _.isEqual(r,n)?!0:!1})},BLUE:"#6495ED",ORANGE:"#FFA500",PINK:"#FF00AF",GREEN:"#28AE7B",PURPLE:"#9D38BD",RED:"#DF0030",GRAY:"gray",BLACK:"black",LIGHT_BLUE:"#9AB8ED",LIGHT_ORANGE:"#EDD19B",LIGHT_PINK:"#ED9BD3",LIGHT_GREEN:"#9BEDCE",LIGHT_PURPLE:"#DA9BED",LIGHT_RED:"#ED9AAC",LIGHT_GRAY:"#ED9B9B",LIGHT_BLACK:"#ED9B9B",GRAY10:"#D6D6D6",GRAY20:"#CDCDCD",GRAY30:"#B3B3B3",GRAY40:"#9A9A9A",GRAY50:"#808080",GRAY60:"#666666",GRAY70:"#4D4D4D",GRAY80:"#333333",GRAY90:"#1A1A1A",BLUE_A:"#C7E9F1",BLUE_B:"#9CDCEB",BLUE_C:"#58C4DD",BLUE_D:"#29ABCA",BLUE_E:"#1C758A",TEAL_A:"#ACEAD7",TEAL_B:"#76DDC0",TEAL_C:"#5CD0B3",TEAL_D:"#55C1A7",TEAL_E:"#49A88F",GREEN_A:"#C9E2AE",GREEN_B:"#A6CF8C",GREEN_C:"#83C167",GREEN_D:"#77B05D",GREEN_E:"#699C52",GOLD_A:"#F7C797",GOLD_B:"#F9B775",GOLD_C:"#F0AC5F",GOLD_D:"#E1A158",GOLD_E:"#C78D46",RED_A:"#F7A1A3",RED_B:"#FF8080",RED_C:"#FC6255",RED_D:"#E65A4C",RED_E:"#CF5044",MAROON_A:"#ECABC1",MAROON_B:"#EC92AB",MAROON_C:"#C55F73",MAROON_D:"#A24D61",MAROON_E:"#94424F",PURPLE_A:"#CAA3E8",PURPLE_B:"#B189C6",PURPLE_C:"#9A72AC",PURPLE_D:"#715582",PURPLE_E:"#644172",MINT_A:"#F5F9E8",MINT_B:"#EDF2DF",MINT_C:"#E0E5CC",GRAY_A:"#FDFDFD",GRAY_B:"#F7F7F7",GRAY_C:"#EEEEEE",GRAY_D:"#DDDDDD",GRAY_E:"#CCCCCC",GRAY_F:"#AAAAAA",GRAY_G:"#999999",GRAY_H:"#555555",GRAY_I:"#333333",KA_BLUE:"#314453",KA_GREEN:"#639B24",_BACKGROUND:"#FDFDFD"}),$.extend(KhanUtil,{INTERACTING:KhanUtil.ORANGE,INTERACTIVE:KhanUtil.ORANGE,DYNAMIC:KhanUtil.BLUE});
},{"../third_party/raphael.js":5,"./knumber.js":2}],4:[function(require,module,exports){
require("./math.js"),require("./expressions.js"),$.extend(KhanUtil,{Polynomial:function(e,t,i,r,n){var a=function(e,t,i){return"undefined"==typeof e||0===e?null:0===i?e:1===i?["*",e,t]:["*",e,["^",t,i]]},s=function(e){var t,i;return"number"==typeof e?(t=e,i=0):_.isArray(e)&&!_.isArray(e[2])?(t=e[1],i=1):_.isArray(e)&&_.isArray(e[2])&&(t=e[1],i=e[2][2]),{coef:t,degree:i}};return t>=e?(this.minDegree=e,this.maxDegree=t):(this.minDegree=t,this.maxDegree=e),this.coefs=i||KhanUtil.randCoefs(this.minDegree,this.maxDegree),this.variable="undefined"!=typeof r?r:"x",this.name=n||"f",this.findMaxDegree=function(e){if(e){for(var t=e.length-1;t>=0;t--)if(0!==e[t])return t;return-1}for(var t=this.maxDegree;t>=this.minDegree;t--)if(0!==this.coefs[t])return t},this.findMinDegree=function(e){if(e){for(var t=0;t<e.length;t++)if(0!==e[t])return t;return-1}for(var t=this.minDegree;t<=this.maxDegree;t++)if(0!==this.coefs[t])return t},this.expr=function(e){"undefined"==typeof e&&(e=this.variable);for(var t=["+"],i=this.maxDegree;i>=this.minDegree;i--){var r=a(this.coefs[i],e,i);null!=r&&t.push(r)}return t},this.getNumberOfTerms=function(){return this.expr().length-1},this.getCoefAndDegreeForTerm=function(e){var t=this.getNumberOfTerms();return e=(e%t+t)%t,s(this.expr()[e+1])},this.text=function(){return KhanUtil.expr(this.expr(this.variable))},this.parsableText=function(){var e=this.text();return e=e.replace(/{/g,"(").replace(/}/g,")")},this.toString=this.text,this.hintEvalOf=function(e){return KhanUtil.expr(this.expr(e))},this.evalOf=function(e){return KhanUtil.expr(this.expr(e),!0)},this.hint=function(e){var t=[];return t.push("<p><code>"+this.name+"("+e+") = "+this.hintEvalOf(e)+"</code></p>"),this.findMaxDegree(this.coefs)>0&&t.push("<p><code>"+this.name+"("+e+") = "+this.evalOf(e)+"</code></p>"),t},this.derivative=function(){for(var e=[],t=this.maxDegree;t>=this.minDegree;t--)e[t-1]=t*this.coefs[t];var i=this.minDegree?this.minDegree-1:0,r=this.maxDegree?this.maxDegree-1:0;return new KhanUtil.Polynomial(i,r,e,this.variable)},this.add=function(e){var t=[];"number"==typeof e&&(e=new KhanUtil.Polynomial(0,0,[e],this.variable));for(var i=Math.min(this.minDegree,e.minDegree),r=Math.max(this.maxDegree,e.maxDegree),n=i;r>=n;n++){var a=0;a+=n<=this.maxDegree?this.coefs[n]:0,a+=n<=e.maxDegree?e.coefs[n]:0,t[n]=a}return new KhanUtil.Polynomial(i,r,t,this.variable)},this.subtract=function(e){return"number"==typeof e?this.add(-e):this.add(e.multiply(-1))},this.multiply=function(e){var t=[];if("number"==typeof e){for(var i=0;i<this.coefs.length;i++)t[i]=this.coefs[i]*e;return new KhanUtil.Polynomial(this.minDegree,this.maxDegree,t,this.variable)}for(var i=this.minDegree;i<=this.maxDegree;i++)if(0!==this.coefs[i])for(var r=e.minDegree;r<=e.maxDegree;r++)if(0!==e.coefs[r]){var n=this.coefs[i]*e.coefs[r];void 0===t[i+r]?t[i+r]=n:t[i+r]+=n}for(var i=0;i<t.length;i++)void 0===t[i]&&(t[i]=0);return new KhanUtil.Polynomial(Math.min(this.minDegree,e.minDegree),t.length-1,t,this.variable)},this.scale=function(e,t){var i=new KhanUtil.Polynomial(0,1,[t,e]),r=this.getNumberOfTerms();if(0===r)return this;var n=this,a=_.map(_.range(0,r),function(e){var t=n.getCoefAndDegreeForTerm(e),r=new KhanUtil.Polynomial(0,0,[t.coef]);return _.times(t.degree,function(e){r=r.multiply(i)}),r}),s=_.reduce(a,function(e,t){return e.add(t)});return s},this},CompositePolynomial:function(e,t,i,r,n,a,s){var h=new KhanUtil.Polynomial(e,t,i,r,n);$.extend(this,h),s||(s=KhanUtil.randRangeNonZero(-5,5));var o=a.name+"("+this.variable+")",f=function(e,t){return e=$.merge([],e),"+"===e[0]?e.push(t):e=["+",e,t],e};return this.expr=function(e){return f(h.expr(e),["*",s,o])},this.text=function(){return KhanUtil.expr(this.expr(this.variable))},this.toString=this.text,this.hintEvalOf=function(e,t){return t?KhanUtil.expr(f(h.expr(e),["*",s,a.evalOf(e)])):KhanUtil.expr(f(h.expr(e),["*",s,a.name+"("+e+")"]))},this.evalOf=function(e){return h.evalOf(e)+s*a.evalOf(e)},this.hint=function(e){var t=[];t.push("<p><code>"+this.name+"("+e+") = "+this.hintEvalOf(e)+"</code></p>");var i=a.name+"("+e+")";return t.push($._("<p>To solve for the value of <code>%(name)s</code>, we need to solve for the value of <code>%(composedFuncWithVal)s</code>.</p>",{name:this.name,composedFuncWithVal:i})),t=t.concat(a.hint(e)),t.push($._("<p>That means <code>%(name)s(%(val)s) = %(hintEvalOf)s</code></p>",{name:this.name,val:e,hintEvalOf:this.hintEvalOf(e,!0)})),t.push("<p><code>"+this.name+"("+e+") = "+this.evalOf(e)+"</code></p>"),t},this},randCoefs:function e(t,i){for(var r=[],n=!0,a=i;a>=t;a--)r[a]=KhanUtil.randRange(-7,7),n=n&&0===r[a];return n?e(t,i):r},findRootsNumerically:function(e,t,i){i=i||.05;for(var r=t[0],n=e(r)>0,a=[];r<t[1];)r+=i,e(r)>0!==n&&(a.push(KhanUtil.roundToNearest(i,r-i)),n=!n);return a}});
},{"./expressions.js":1,"./math.js":3}],5:[function(require,module,exports){
!function(){function t(){if(t.is(arguments[0],H)){for(var e=arguments[0],r=Zt[m](t,e.splice(0,3+t.is(e[0],q))),i=r.set(),s=0,n=e[S];n>s;s++){var a=e[s]||{};c[p](a.type)&&i[Y](r[a.type]().attr(a))}return i}return Zt[m](t,arguments)}function e(){for(var t=[],e=0;32>e;e++)t[e]=(~~(16*G.random()))[W](16);return t[12]=4,t[16]=(3&t[16]|8)[W](16),"r-"+t[T]("")}function r(t,e,r){function i(){var s=Array[f].slice.call(arguments,0),n=s[T]("►"),a=i.cache=i.cache||{},o=i.count=i.count||[];return a[p](n)?r?r(a[n]):a[n]:(o[S]>=1e3&&delete a[o.shift()],o[Y](n),a[n]=t[m](e,s),r?r(a[n]):a[n])}return i}function i(e,r,i,s,n){return n?t.format("M{0},{1}l{2},0a{3},{3},0,0,1,{3},{3}l0,{5}a{3},{3},0,0,1,{4},{3}l{6},0a{3},{3},0,0,1,{4},{4}l0,{7}a{3},{3},0,0,1,{3},{4}z",e+n,r,i-2*n,n,-n,s-2*n,2*n-i,2*n-s):t.format("M{0},{1}l{2},0,0,{3},{4},0z",e,r,i,s,-i)}function s(){return this.x+_+this.y}function n(e){return function(r,i,s,n){var a={back:e};return t.is(s,"function")?n=s:a.rot=s,r&&r.constructor==Pt&&(r=r.attrs.path),r&&(a.along=r),this.animate(a,i,n)}}function a(t,e,r,i,s,n){function a(t){return((u*t+c)*t+l)*t}function o(t,e){var r=h(t,e);return((d*r+p)*r+f)*r}function h(t,e){var r,i,s,n,o,h;for(s=t,h=0;8>h;h++){if(n=a(s)-t,R(n)<e)return s;if(o=(3*u*s+2*c)*s+l,R(o)<1e-6)break;s-=n/o}if(r=0,i=1,s=t,r>s)return r;if(s>i)return i;for(;i>r;){if(n=a(s),R(n-t)<e)return s;t>n?r=s:i=s,s=(i-r)/2+r}return s}var l=3*e,c=3*(i-e)-l,u=1-l-c,f=3*r,p=3*(s-r)-f,d=1-f-p;return o(t,1/(200*n))}var o;o="".trim?function(t,e,r){t.setAttribute(e,String(r).trim())}:function(t,e,r){t.setAttribute(e,String(r))},t.version="1.5.2";var h,l=/[, ]+/,c={circle:1,rect:1,path:1,ellipse:1,text:1,image:1},u=/\{(\d+)\}/g,f="prototype",p="hasOwnProperty",d=document,v=window,y={was:Object[f][p].call(v,"Raphael"),is:v.Raphael},g=function(){this.customAttributes={}},x="appendChild",m="apply",b="concat",k="createTouch"in d,w="",_=" ",B=String,C="split",A="click dblclick mousedown mousemove mouseout mouseover mouseup touchstart touchmove touchend orientationchange touchcancel gesturestart gesturechange gestureend"[C](_),N={mousedown:"touchstart",mousemove:"touchmove",mouseup:"touchend"},T="join",S="length",M=B[f].toLowerCase,G=Math,E=G.max,z=G.min,R=G.abs,L=G.pow,j=G.PI,q="number",V="string",H="array",W="toString",F="fill",P=Object[f][W],Y="push",D=/^url\(['"]?([^\)]+?)['"]?\)$/i,X=/^\s*((#[a-f\d]{6})|(#[a-f\d]{3})|rgba?\(\s*([\d\.]+%?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+(?:%?\s*,\s*[\d\.]+)?)%?\s*\)|hsba?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+(?:%?\s*,\s*[\d\.]+)?)%?\s*\)|hsla?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+(?:%?\s*,\s*[\d\.]+)?)%?\s*\))\s*$/i,O={NaN:1,Infinity:1,"-Infinity":1},I=/^(?:cubic-)?bezier\(([^,]+),([^,]+),([^,]+),([^\)]+)\)/,$=G.round,U=parseFloat,Z=parseInt,Q=" progid:DXImageTransform.Microsoft",J=B[f].toUpperCase,K={blur:0,"clip-rect":"0 0 1e9 1e9",cursor:"default",cx:0,cy:0,fill:"#fff","fill-opacity":1,font:'10px "Arial"',"font-family":'"Arial"',"font-size":"10","font-style":"normal","font-weight":400,gradient:0,height:0,href:"http://raphaeljs.com/",opacity:1,path:"M0,0",r:0,rotation:0,rx:0,ry:0,scale:"1 1",src:"",stroke:"#000","stroke-dasharray":"","stroke-linecap":"butt","stroke-linejoin":"butt","stroke-miterlimit":0,"stroke-opacity":1,"stroke-width":1,target:"_blank","text-anchor":"middle",title:"Raphael",translation:"0 0",width:0,x:0,y:0},tt={along:"along",blur:q,"clip-rect":"csv",cx:q,cy:q,fill:"colour","fill-opacity":q,"font-size":q,height:q,opacity:q,path:"path",r:q,rotation:"csv",rx:q,ry:q,scale:"csv",stroke:"colour","stroke-opacity":q,"stroke-width":q,translation:"csv",width:q,x:q,y:q},et="replace",rt=/^(from|to|\d+%?)$/,it=/\s*,\s*/,st={hs:1,rg:1},nt=/,?([achlmqrstvxz]),?/gi,at=/([achlmqstvz])[\s,]*((-?\d*\.?\d*(?:e[-+]?\d+)?\s*,?\s*)+)/gi,ot=/(-?\d*\.?\d*(?:e[-+]?\d+)?)\s*,?\s*/gi,ht=/^r(?:\(([^,]+?)\s*,\s*([^\)]+?)\))?/,lt=function(t,e){return t.key-e.key};if(t.type=v.SVGAngle||d.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1")?"SVG":"VML","VML"==t.type){var ct,ut=d.createElement("div");if(ut.innerHTML='<v:shape adj="1"/>',ct=ut.firstChild,ct.style.behavior="url(#default#VML)",!ct||"object"!=typeof ct.adj)return t.type=null;ut=null}t.svg=!(t.vml="VML"==t.type),g[f]=t[f],h=g[f],t._id=0,t._oid=0,t.fn={},t.is=function(t,e){return e=M.call(e),"finite"==e?!O[p](+t):"null"==e&&null===t||e==typeof t||"object"==e&&t===Object(t)||"array"==e&&Array.isArray&&Array.isArray(t)||P.call(t).slice(8,-1).toLowerCase()==e},t.angle=function(e,r,i,s,n,a){if(null==n){var o=e-i,h=r-s;return o||h?(180*(0>o)+180*G.atan(-h/-o)/j+360)%360:0}return t.angle(e,r,n,a)-t.angle(i,s,n,a)},t.rad=function(t){return t%360*j/180},t.deg=function(t){return 180*t/j%360},t.snapTo=function(e,r,i){if(i=t.is(i,"finite")?i:10,t.is(e,H)){for(var s=e.length;s--;)if(R(e[s]-r)<=i)return e[s]}else{e=+e;var n=r%e;if(i>n)return r-n;if(n>e-i)return r-n+e}return r},t.setWindow=function(t){v=t,d=v.document};var ft=function(e){if(t.vml){var i,s=/^\s+|\s+$/g;try{var n=new ActiveXObject("htmlfile");n.write("<body>"),n.close(),i=n.body}catch(a){i=createPopup().document.body}var o=i.createTextRange();ft=r(function(t){try{i.style.color=B(t)[et](s,w);var e=o.queryCommandValue("ForeColor");return e=(255&e)<<16|65280&e|(16711680&e)>>>16,"#"+("000000"+e[W](16)).slice(-6)}catch(r){return"none"}})}else{var h=d.createElement("i");h.title="Raphaël Colour Picker",h.style.display="none",d.body[x](h),ft=r(function(t){return h.style.color=t,d.defaultView.getComputedStyle(h,w).getPropertyValue("color")})}return ft(e)},pt=function(){return"hsb("+[this.h,this.s,this.b]+")"},dt=function(){return"hsl("+[this.h,this.s,this.l]+")"},vt=function(){return this.hex};t.hsb2rgb=function(e,r,i,s){return t.is(e,"object")&&"h"in e&&"s"in e&&"b"in e&&(i=e.b,r=e.s,e=e.h,s=e.o),t.hsl2rgb(e,r,i/2,s)},t.hsl2rgb=function(e,r,i,s){t.is(e,"object")&&"h"in e&&"s"in e&&"l"in e&&(i=e.l,r=e.s,e=e.h),(e>1||r>1||i>1)&&(e/=360,r/=100,i/=100);var n,a,o,h={},l=["r","g","b"];if(r){n=.5>i?i*(1+r):i+r-i*r,a=2*i-n;for(var c=0;3>c;c++)o=e+1/3*-(c-1),0>o&&o++,o>1&&o--,1>6*o?h[l[c]]=a+6*(n-a)*o:1>2*o?h[l[c]]=n:2>3*o?h[l[c]]=a+(n-a)*(2/3-o)*6:h[l[c]]=a}else h={r:i,g:i,b:i};return h.r*=255,h.g*=255,h.b*=255,h.hex="#"+(16777216|h.b|h.g<<8|h.r<<16).toString(16).slice(1),t.is(s,"finite")&&(h.opacity=s),h.toString=vt,h},t.rgb2hsb=function(e,r,i){if(null==r&&t.is(e,"object")&&"r"in e&&"g"in e&&"b"in e&&(i=e.b,r=e.g,e=e.r),null==r&&t.is(e,V)){var s=t.getRGB(e);e=s.r,r=s.g,i=s.b}(e>1||r>1||i>1)&&(e/=255,r/=255,i/=255);var n,a,o=E(e,r,i),h=z(e,r,i),l=o;if(h==o)return{h:0,s:0,b:o,toString:pt};var c=o-h;return a=c/o,n=e==o?(r-i)/c:r==o?2+(i-e)/c:4+(e-r)/c,n/=6,0>n&&n++,n>1&&n--,{h:n,s:a,b:l,toString:pt}},t.rgb2hsl=function(e,r,i){if(null==r&&t.is(e,"object")&&"r"in e&&"g"in e&&"b"in e&&(i=e.b,r=e.g,e=e.r),null==r&&t.is(e,V)){var s=t.getRGB(e);e=s.r,r=s.g,i=s.b}(e>1||r>1||i>1)&&(e/=255,r/=255,i/=255);var n,a,o,h=E(e,r,i),l=z(e,r,i),c=(h+l)/2;if(l==h)o={h:0,s:0,l:c};else{var u=h-l;a=.5>c?u/(h+l):u/(2-h-l),n=e==h?(r-i)/u:r==h?2+(i-e)/u:4+(e-r)/u,n/=6,0>n&&n++,n>1&&n--,o={h:n,s:a,l:c}}return o.toString=dt,o},t._path2string=function(){return this.join(",")[et](nt,"$1")},t.getRGB=r(function(e){if(!e||(e=B(e)).indexOf("-")+1)return{r:-1,g:-1,b:-1,hex:"none",error:1};if("none"==e)return{r:-1,g:-1,b:-1,hex:"none"};!(st[p](e.toLowerCase().substring(0,2))||"#"==e.charAt())&&(e=ft(e));var r,i,s,n,a,o,h=e.match(X);return h?(h[2]&&(s=Z(h[2].substring(5),16),i=Z(h[2].substring(3,5),16),r=Z(h[2].substring(1,3),16)),h[3]&&(s=Z((a=h[3].charAt(3))+a,16),i=Z((a=h[3].charAt(2))+a,16),r=Z((a=h[3].charAt(1))+a,16)),h[4]&&(o=h[4][C](it),r=U(o[0]),"%"==o[0].slice(-1)&&(r*=2.55),i=U(o[1]),"%"==o[1].slice(-1)&&(i*=2.55),s=U(o[2]),"%"==o[2].slice(-1)&&(s*=2.55),"rgba"==h[1].toLowerCase().slice(0,4)&&(n=U(o[3])),o[3]&&"%"==o[3].slice(-1)&&(n/=100)),h[5]?(o=h[5][C](it),r=U(o[0]),"%"==o[0].slice(-1)&&(r*=2.55),i=U(o[1]),"%"==o[1].slice(-1)&&(i*=2.55),s=U(o[2]),"%"==o[2].slice(-1)&&(s*=2.55),("deg"==o[0].slice(-3)||"°"==o[0].slice(-1))&&(r/=360),"hsba"==h[1].toLowerCase().slice(0,4)&&(n=U(o[3])),o[3]&&"%"==o[3].slice(-1)&&(n/=100),t.hsb2rgb(r,i,s,n)):h[6]?(o=h[6][C](it),r=U(o[0]),"%"==o[0].slice(-1)&&(r*=2.55),i=U(o[1]),"%"==o[1].slice(-1)&&(i*=2.55),s=U(o[2]),"%"==o[2].slice(-1)&&(s*=2.55),("deg"==o[0].slice(-3)||"°"==o[0].slice(-1))&&(r/=360),"hsla"==h[1].toLowerCase().slice(0,4)&&(n=U(o[3])),o[3]&&"%"==o[3].slice(-1)&&(n/=100),t.hsl2rgb(r,i,s,n)):(h={r:r,g:i,b:s},h.hex="#"+(16777216|s|i<<8|r<<16).toString(16).slice(1),t.is(n,"finite")&&(h.opacity=n),h)):{r:-1,g:-1,b:-1,hex:"none",error:1}},t),t.getColor=function(t){var e=this.getColor.start=this.getColor.start||{h:0,s:1,b:t||.75},r=this.hsb2rgb(e.h,e.s,e.b);return e.h+=.075,e.h>1&&(e.h=0,e.s-=.2,e.s<=0&&(this.getColor.start={h:0,s:1,b:e.b})),r.hex},t.getColor.reset=function(){delete this.start},t.parsePathString=r(function(e){if(!e)return null;var r={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},i=[];return t.is(e,H)&&t.is(e[0],H)&&(i=gt(e)),i[S]||B(e)[et](at,function(t,e,s){var n=[],a=M.call(e);for(s[et](ot,function(t,e){e&&n[Y](+e)}),"m"==a&&n[S]>2&&(i[Y]([e][b](n.splice(0,2))),a="l",e="m"==e?"l":"L");n[S]>=r[a]&&(i[Y]([e][b](n.splice(0,r[a]))),r[a]););}),i[W]=t._path2string,i}),t.findDotsAtSegment=function(t,e,r,i,s,n,a,o,h){var l=1-h,c=L(l,3)*t+3*L(l,2)*h*r+3*l*h*h*s+L(h,3)*a,u=L(l,3)*e+3*L(l,2)*h*i+3*l*h*h*n+L(h,3)*o,f=t+2*h*(r-t)+h*h*(s-2*r+t),p=e+2*h*(i-e)+h*h*(n-2*i+e),d=r+2*h*(s-r)+h*h*(a-2*s+r),v=i+2*h*(n-i)+h*h*(o-2*n+i),y=(1-h)*t+h*r,g=(1-h)*e+h*i,x=(1-h)*s+h*a,m=(1-h)*n+h*o,b=90-180*G.atan((f-d)/(p-v))/j;return(f>d||v>p)&&(b+=180),{x:c,y:u,m:{x:f,y:p},n:{x:d,y:v},start:{x:y,y:g},end:{x:x,y:m},alpha:b}};var yt=r(function(t){if(!t)return{x:0,y:0,width:0,height:0};t=Ct(t);for(var e,r=0,i=0,s=[],n=[],a=0,o=t[S];o>a;a++)if(e=t[a],"M"==e[0])r=e[1],i=e[2],s[Y](r),n[Y](i);else{var h=Bt(r,i,e[1],e[2],e[3],e[4],e[5],e[6]);s=s[b](h.min.x,h.max.x),n=n[b](h.min.y,h.max.y),r=e[5],i=e[6]}var l=z[m](0,s),c=z[m](0,n);return{x:l,y:c,width:E[m](0,s)-l,height:E[m](0,n)-c}}),gt=function(e){var r=[];t.is(e,H)&&t.is(e&&e[0],H)||(e=t.parsePathString(e));for(var i=0,s=e[S];s>i;i++){r[i]=[];for(var n=0,a=e[i][S];a>n;n++)r[i][n]=e[i][n]}return r[W]=t._path2string,r},xt=r(function(e){t.is(e,H)&&t.is(e&&e[0],H)||(e=t.parsePathString(e));var r=[],i=0,s=0,n=0,a=0,o=0;"M"==e[0][0]&&(i=e[0][1],s=e[0][2],n=i,a=s,o++,r[Y](["M",i,s]));for(var h=o,l=e[S];l>h;h++){var c=r[h]=[],u=e[h];if(u[0]!=M.call(u[0]))switch(c[0]=M.call(u[0]),c[0]){case"a":c[1]=u[1],c[2]=u[2],c[3]=u[3],c[4]=u[4],c[5]=u[5],c[6]=+(u[6]-i).toFixed(3),c[7]=+(u[7]-s).toFixed(3);break;case"v":c[1]=+(u[1]-s).toFixed(3);break;case"m":n=u[1],a=u[2];default:for(var f=1,p=u[S];p>f;f++)c[f]=+(u[f]-(f%2?i:s)).toFixed(3)}else{c=r[h]=[],"m"==u[0]&&(n=u[1]+i,a=u[2]+s);for(var d=0,v=u[S];v>d;d++)r[h][d]=u[d]}var y=r[h][S];switch(r[h][0]){case"z":i=n,s=a;break;case"h":i+=+r[h][y-1];break;case"v":s+=+r[h][y-1];break;default:i+=+r[h][y-2],s+=+r[h][y-1]}}return r[W]=t._path2string,r},0,gt),mt=r(function(e){t.is(e,H)&&t.is(e&&e[0],H)||(e=t.parsePathString(e));var r=[],i=0,s=0,n=0,a=0,o=0;"M"==e[0][0]&&(i=+e[0][1],s=+e[0][2],n=i,a=s,o++,r[0]=["M",i,s]);for(var h=o,l=e[S];l>h;h++){var c=r[h]=[],u=e[h];if(u[0]!=J.call(u[0]))switch(c[0]=J.call(u[0]),c[0]){case"A":c[1]=u[1],c[2]=u[2],c[3]=u[3],c[4]=u[4],c[5]=u[5],c[6]=+(u[6]+i),c[7]=+(u[7]+s);break;case"V":c[1]=+u[1]+s;break;case"H":c[1]=+u[1]+i;break;case"M":n=+u[1]+i,a=+u[2]+s;default:for(var f=1,p=u[S];p>f;f++)c[f]=+u[f]+(f%2?i:s)}else for(var d=0,v=u[S];v>d;d++)r[h][d]=u[d];switch(c[0]){case"Z":i=n,s=a;break;case"H":i=c[1];break;case"V":s=c[1];break;case"M":n=r[h][r[h][S]-2],a=r[h][r[h][S]-1];default:i=r[h][r[h][S]-2],s=r[h][r[h][S]-1]}}return r[W]=t._path2string,r},null,gt),bt=function(t,e,r,i){return[t,e,r,i,r,i]},kt=function(t,e,r,i,s,n){var a=1/3,o=2/3;return[a*t+o*r,a*e+o*i,a*s+o*r,a*n+o*i,s,n]},wt=function(t,e,i,s,n,a,o,h,l,c){var u,f=120*j/180,p=j/180*(+n||0),d=[],v=r(function(t,e,r){var i=t*G.cos(r)-e*G.sin(r),s=t*G.sin(r)+e*G.cos(r);return{x:i,y:s}});if(c)A=c[0],N=c[1],_=c[2],B=c[3];else{u=v(t,e,-p),t=u.x,e=u.y,u=v(h,l,-p),h=u.x,l=u.y;var y=(G.cos(j/180*n),G.sin(j/180*n),(t-h)/2),g=(e-l)/2,x=y*y/(i*i)+g*g/(s*s);x>1&&(x=G.sqrt(x),i=x*i,s=x*s);var m=i*i,k=s*s,w=(a==o?-1:1)*G.sqrt(R((m*k-m*g*g-k*y*y)/(m*g*g+k*y*y))),_=w*i*g/s+(t+h)/2,B=w*-s*y/i+(e+l)/2,A=G.asin(((e-B)/s).toFixed(9)),N=G.asin(((l-B)/s).toFixed(9));A=_>t?j-A:A,N=_>h?j-N:N,0>A&&(A=2*j+A),0>N&&(N=2*j+N),o&&A>N&&(A-=2*j),!o&&N>A&&(N-=2*j)}var M=N-A;if(R(M)>f){var E=N,z=h,L=l;N=A+f*(o&&N>A?1:-1),h=_+i*G.cos(N),l=B+s*G.sin(N),d=wt(h,l,i,s,n,0,o,z,L,[N,E,_,B])}M=N-A;var q=G.cos(A),V=G.sin(A),H=G.cos(N),W=G.sin(N),F=G.tan(M/4),P=4/3*i*F,Y=4/3*s*F,D=[t,e],X=[t+P*V,e-Y*q],O=[h+P*W,l-Y*H],I=[h,l];if(X[0]=2*D[0]-X[0],X[1]=2*D[1]-X[1],c)return[X,O,I][b](d);d=[X,O,I][b](d)[T]()[C](",");for(var $=[],U=0,Z=d[S];Z>U;U++)$[U]=U%2?v(d[U-1],d[U],p).y:v(d[U],d[U+1],p).x;return $},_t=function(t,e,r,i,s,n,a,o,h){var l=1-h;return{x:L(l,3)*t+3*L(l,2)*h*r+3*l*h*h*s+L(h,3)*a,y:L(l,3)*e+3*L(l,2)*h*i+3*l*h*h*n+L(h,3)*o}},Bt=r(function(t,e,r,i,s,n,a,o){var h,l=s-2*r+t-(a-2*s+r),c=2*(r-t)-2*(s-r),u=t-r,f=(-c+G.sqrt(c*c-4*l*u))/2/l,p=(-c-G.sqrt(c*c-4*l*u))/2/l,d=[e,o],v=[t,a];return R(f)>"1e12"&&(f=.5),R(p)>"1e12"&&(p=.5),f>0&&1>f&&(h=_t(t,e,r,i,s,n,a,o,f),v[Y](h.x),d[Y](h.y)),p>0&&1>p&&(h=_t(t,e,r,i,s,n,a,o,p),v[Y](h.x),d[Y](h.y)),l=n-2*i+e-(o-2*n+i),c=2*(i-e)-2*(n-i),u=e-i,f=(-c+G.sqrt(c*c-4*l*u))/2/l,p=(-c-G.sqrt(c*c-4*l*u))/2/l,R(f)>"1e12"&&(f=.5),R(p)>"1e12"&&(p=.5),f>0&&1>f&&(h=_t(t,e,r,i,s,n,a,o,f),v[Y](h.x),d[Y](h.y)),p>0&&1>p&&(h=_t(t,e,r,i,s,n,a,o,p),v[Y](h.x),d[Y](h.y)),{min:{x:z[m](0,v),y:z[m](0,d)},max:{x:E[m](0,v),y:E[m](0,d)}}}),Ct=r(function(t,e){for(var r=mt(t),i=e&&mt(e),s={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},n={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},a=(function(t,e){var r,i;if(!t)return["C",e.x,e.y,e.x,e.y,e.x,e.y];switch(!(t[0]in{T:1,Q:1})&&(e.qx=e.qy=null),t[0]){case"M":e.X=t[1],e.Y=t[2];break;case"A":t=["C"][b](wt[m](0,[e.x,e.y][b](t.slice(1))));break;case"S":r=e.x+(e.x-(e.bx||e.x)),i=e.y+(e.y-(e.by||e.y)),t=["C",r,i][b](t.slice(1));break;case"T":e.qx=e.x+(e.x-(e.qx||e.x)),e.qy=e.y+(e.y-(e.qy||e.y)),t=["C"][b](kt(e.x,e.y,e.qx,e.qy,t[1],t[2]));break;case"Q":e.qx=t[1],e.qy=t[2],t=["C"][b](kt(e.x,e.y,t[1],t[2],t[3],t[4]));break;case"L":t=["C"][b](bt(e.x,e.y,t[1],t[2]));break;case"H":t=["C"][b](bt(e.x,e.y,t[1],e.y));break;case"V":t=["C"][b](bt(e.x,e.y,e.x,t[1]));break;case"Z":t=["C"][b](bt(e.x,e.y,e.X,e.Y))}return t}),o=function(t,e){if(t[e][S]>7){t[e].shift();for(var s=t[e];s[S];)t.splice(e++,0,["C"][b](s.splice(0,6)));t.splice(e,1),c=E(r[S],i&&i[S]||0)}},h=function(t,e,s,n,a){t&&e&&"M"==t[a][0]&&"M"!=e[a][0]&&(e.splice(a,0,["M",n.x,n.y]),s.bx=0,s.by=0,s.x=t[a][1],s.y=t[a][2],c=E(r[S],i&&i[S]||0))},l=0,c=E(r[S],i&&i[S]||0);c>l;l++){r[l]=a(r[l],s),o(r,l),i&&(i[l]=a(i[l],n)),i&&o(i,l),h(r,i,s,n,l),h(i,r,n,s,l);var u=r[l],f=i&&i[l],p=u[S],d=i&&f[S];s.x=u[p-2],s.y=u[p-1],s.bx=U(u[p-4])||s.x,s.by=U(u[p-3])||s.y,n.bx=i&&(U(f[d-4])||n.x),n.by=i&&(U(f[d-3])||n.y),n.x=i&&f[d-2],n.y=i&&f[d-1]}return i?[r,i]:r},null,gt),At=r(function(e){for(var r=[],i=0,s=e[S];s>i;i++){var n={},a=e[i].match(/^([^:]*):?([\d\.]*)/);if(n.color=t.getRGB(a[1]),n.color.error)return null;n.color=n.color.hex,a[2]&&(n.offset=a[2]+"%"),r[Y](n)}for(i=1,s=r[S]-1;s>i;i++)if(!r[i].offset){for(var o=U(r[i-1].offset||0),h=0,l=i+1;s>l;l++)if(r[l].offset){h=r[l].offset;break}h||(h=100,l=s),h=U(h);for(var c=(h-o)/(l-i+1);l>i;i++)o+=c,r[i].offset=o+"%"}return r}),Nt=function(e,r,i,s){var n;return t.is(e,V)||t.is(e,"object")?(n=t.is(e,V)?d.getElementById(e):e,n.tagName?null==r?{container:n,width:n.style.pixelWidth||n.offsetWidth,height:n.style.pixelHeight||n.offsetHeight}:{container:n,width:r,height:i}:void 0):{container:1,x:e,y:r,width:i,height:s}},Tt=function(t,e){var r=this;for(var i in e)if(e[p](i)&&!(i in t))switch(typeof e[i]){case"function":!function(e){t[i]=t===r?e:function(){return e[m](r,arguments)}}(e[i]);break;case"object":t[i]=t[i]||{},Tt.call(this,t[i],e[i]);break;default:t[i]=e[i]}},St=function(t,e){t==e.top&&(e.top=t.prev),t==e.bottom&&(e.bottom=t.next),t.next&&(t.next.prev=t.prev),t.prev&&(t.prev.next=t.next)},Mt=function(t,e){e.top!==t&&(St(t,e),t.next=null,t.prev=e.top,e.top.next=t,e.top=t)},Gt=function(t,e){e.bottom!==t&&(St(t,e),t.next=e.bottom,t.prev=null,e.bottom.prev=t,e.bottom=t)},Et=function(t,e,r){St(t,r),e==r.top&&(r.top=t),e.next&&(e.next.prev=t),t.next=e.next,t.prev=e,e.next=t},zt=function(t,e,r){St(t,r),e==r.bottom&&(r.bottom=t),e.prev&&(e.prev.next=t),t.prev=e.prev,e.prev=t,t.next=e},Rt=function(t){return function(){throw new Error("Raphaël: you are calling to method “"+t+"” of removed object")}};if(t.pathToRelative=xt,t.svg){h.svgns="http://www.w3.org/2000/svg",h.xlink="http://www.w3.org/1999/xlink",$=function(t){return+t+.5*(~~t===t)};var Lt=function(t,e){if(!e)return t=d.createElementNS(h.svgns,t),t.style.webkitTapHighlightColor="rgba(0,0,0,0)",t;for(var r in e)e[p](r)&&o(t,r,B(e[r]))};t[W]=function(){return"Your browser supports SVG.\nYou are running Raphaël "+this.version};var jt=function(t,e){var r=Lt("path");e.canvas&&e.canvas[x](r);var i=new Pt(r,e);return i.type="path",Ht(i,{fill:"none",stroke:"#000",path:t}),i},qt=function(t,r,i){var s="linear",n=.5,a=.5,o=t.style;if(r=B(r)[et](ht,function(t,e,r){if(s="radial",e&&r){n=U(e),a=U(r);var i=2*(a>.5)-1;L(n-.5,2)+L(a-.5,2)>.25&&(a=G.sqrt(.25-L(n-.5,2))*i+.5)&&.5!=a&&(a=a.toFixed(5)-1e-5*i)}return w}),r=r[C](/\s*\-\s*/),"linear"==s){var h=r.shift();if(h=-U(h),isNaN(h))return null;var l=[0,0,G.cos(h*j/180),G.sin(h*j/180)],c=1/(E(R(l[2]),R(l[3]))||1);l[2]*=c,l[3]*=c,l[2]<0&&(l[0]=-l[2],l[2]=0),l[3]<0&&(l[1]=-l[3],l[3]=0)}var u=At(r);if(!u)return null;var f=t.getAttribute(F);f=f.match(/^url\(#(.*)\)$/),f&&i.defs.removeChild(d.getElementById(f[1]));var p=Lt(s+"Gradient");p.id=e(),Lt(p,"radial"==s?{fx:n,fy:a}:{x1:l[0],y1:l[1],x2:l[2],y2:l[3]}),i.defs[x](p);for(var v=0,y=u[S];y>v;v++){var g=Lt("stop");Lt(g,{offset:u[v].offset?u[v].offset:v?"100%":"0%","stop-color":u[v].color||"#fff"}),p[x](g)}return Lt(t,{fill:"url(#"+p.id+")",opacity:1,"fill-opacity":1}),o.fill=w,o.opacity=1,o.fillOpacity=1,1},Vt=function(e){var r=e.getBBox();Lt(e.pattern,{patternTransform:t.format("translate({0},{1})",r.x,r.y)})},Ht=function(r,i){var s={"":[0],none:[0],"-":[3,1],".":[1,1],"-.":[3,1,1,1],"-..":[3,1,1,1,1,1],". ":[1,3],"- ":[4,3],"--":[8,3],"- .":[4,3,1,3],"--.":[8,3,1,3],"--..":[8,3,1,3,1,3]},n=r.node,a=r.attrs,h=r.rotate(),c=function(t,e){if(e=s[M.call(e)]){for(var r=t.attrs["stroke-width"]||"1",a={round:r,square:r,butt:0}[t.attrs["stroke-linecap"]||i["stroke-linecap"]]||0,o=[],h=e[S];h--;)o[h]=e[h]*r+(h%2?1:-1)*a;Lt(n,{"stroke-dasharray":o[T](",")})}};i[p]("rotation")&&(h=i.rotation);var u=B(h)[C](l);u.length-1?(u[1]=+u[1],u[2]=+u[2]):u=null,U(h)&&r.rotate(0,!0);for(var f in i)if(i[p](f)){if(!K[p](f))continue;var v=i[f];switch(a[f]=v,f){case"blur":r.blur(v);break;case"rotation":r.rotate(v,!0);break;case"href":case"title":case"target":var y=n.parentNode;if("a"!=M.call(y.tagName)){var g=Lt("a");y.insertBefore(g,n),g[x](n),y=g}"target"==f&&"blank"==v?y.setAttributeNS(r.paper.xlink,"show","new"):y.setAttributeNS(r.paper.xlink,f,v);break;case"cursor":n.style.cursor=v;break;case"clip-rect":var m=B(v)[C](l);if(4==m[S]){r.clip&&r.clip.parentNode.parentNode.removeChild(r.clip.parentNode);var b=Lt("clipPath"),k=Lt("rect");b.id=e(),Lt(k,{x:m[0],y:m[1],width:m[2],height:m[3]}),b[x](k),r.paper.defs[x](b),Lt(n,{"clip-path":"url(#"+b.id+")"}),r.clip=k}if(!v){var A=d.getElementById(n.getAttribute("clip-path")[et](/(^url\(#|\)$)/g,w));A&&A.parentNode.removeChild(A),Lt(n,{"clip-path":w}),delete r.clip}break;case"path":"path"==r.type&&Lt(n,{d:v?a.path=mt(v):"M0,0"});break;case"width":if(o(n,f,v),!a.fx)break;f="x",v=a.x;case"x":a.fx&&(v=-a.x-(a.width||0));case"rx":if("rx"==f&&"rect"==r.type)break;case"cx":u&&("x"==f||"cx"==f)&&(u[1]+=v-a[f]),o(n,f,v),r.pattern&&Vt(r);break;case"height":if(o(n,f,v),!a.fy)break;f="y",v=a.y;case"y":a.fy&&(v=-a.y-(a.height||0));case"ry":if("ry"==f&&"rect"==r.type)break;case"cy":u&&("y"==f||"cy"==f)&&(u[2]+=v-a[f]),o(n,f,v),r.pattern&&Vt(r);break;case"r":"rect"==r.type?Lt(n,{rx:v,ry:v}):o(n,f,v);break;case"src":"image"==r.type&&n.setAttributeNS(r.paper.xlink,"href",v);break;case"stroke-width":n.style.strokeWidth=v,o(n,f,v),a["stroke-dasharray"]&&c(r,a["stroke-dasharray"]);break;case"stroke-dasharray":c(r,v);break;case"translation":var N=B(v)[C](l);N[0]=+N[0]||0,N[1]=+N[1]||0,u&&(u[1]+=N[0],u[2]+=N[1]),Ne.call(r,N[0],N[1]);break;case"scale":N=B(v)[C](l),r.scale(+N[0]||1,+N[1]||+N[0]||1,isNaN(U(N[2]))?null:+N[2],isNaN(U(N[3]))?null:+N[3]);break;case F:var G=B(v).match(D);if(G){b=Lt("pattern");var E=Lt("image");b.id=e(),Lt(b,{x:0,y:0,patternUnits:"userSpaceOnUse",height:1,width:1}),Lt(E,{x:0,y:0}),E.setAttributeNS(r.paper.xlink,"href",G[1]),b[x](E);var z=d.createElement("img");z.style.cssText="position:absolute;left:-9999em;top-9999em",z.onload=function(){Lt(b,{width:this.offsetWidth,height:this.offsetHeight}),Lt(E,{width:this.offsetWidth,height:this.offsetHeight}),d.body.removeChild(this),r.paper.safari()},d.body[x](z),z.src=G[1],r.paper.defs[x](b),n.style.fill="url(#"+b.id+")",Lt(n,{fill:"url(#"+b.id+")"}),r.pattern=b,r.pattern&&Vt(r);break}var R=t.getRGB(v);if(R.error){if(({circle:1,ellipse:1}[p](r.type)||"r"!=B(v).charAt())&&qt(n,v,r.paper)){a.gradient=v,a.fill="none";break}}else delete i.gradient,delete a.gradient,!t.is(a.opacity,"undefined")&&t.is(i.opacity,"undefined")&&Lt(n,{opacity:a.opacity}),!t.is(a["fill-opacity"],"undefined")&&t.is(i["fill-opacity"],"undefined")&&Lt(n,{"fill-opacity":a["fill-opacity"]});R[p]("opacity")&&Lt(n,{"fill-opacity":R.opacity>1?R.opacity/100:R.opacity});case"stroke":R=t.getRGB(v),o(n,f,R.hex),"stroke"==f&&R[p]("opacity")&&Lt(n,{"stroke-opacity":R.opacity>1?R.opacity/100:R.opacity});break;case"gradient":(({circle:1,ellipse:1})[p](r.type)||"r"!=B(v).charAt())&&qt(n,v,r.paper);break;case"opacity":a.gradient&&!a[p]("stroke-opacity")&&Lt(n,{"stroke-opacity":v>1?v/100:v});case"fill-opacity":if(a.gradient){var L=d.getElementById(n.getAttribute(F)[et](/^url\(#|\)$/g,w));if(L){var j=L.getElementsByTagName("stop");o(j[j[S]-1],"stop-opacity",v)}break}default:"font-size"==f&&(v=Z(v,10)+"px");var q=f[et](/(\-.)/g,function(t){return J.call(t.substring(1))});n.style[q]=v,o(n,f,v)}}Ft(r,i),u?r.rotate(u.join(_)):U(h)&&r.rotate(h,!0)},Wt=1.2,Ft=function(e,r){if("text"==e.type&&(r[p]("text")||r[p]("font")||r[p]("font-size")||r[p]("x")||r[p]("y"))){var i=e.attrs,s=e.node,n=s.firstChild?Z(d.defaultView.getComputedStyle(s.firstChild,w).getPropertyValue("font-size"),10):10;if(r[p]("text")){for(i.text=r.text;s.firstChild;)s.removeChild(s.firstChild);for(var a=B(r.text)[C]("\n"),o=0,h=a[S];h>o;o++)if(a[o]){var l=Lt("tspan");o&&Lt(l,{dy:n*Wt,x:i.x}),l[x](d.createTextNode(a[o])),s[x](l)}}else for(a=s.getElementsByTagName("tspan"),o=0,h=a[S];h>o;o++)o&&Lt(a[o],{dy:n*Wt,x:i.x});Lt(s,{y:i.y});var c=e.getBBox(),u=i.y-(c.y+c.height/2);u&&t.is(u,"finite")&&Lt(s,{y:i.y+u})}},Pt=function(e,r){this[0]=e,this.id=t._oid++,this.node=e,e.raphael=this,this.paper=r,this.attrs=this.attrs||{},this.transformations=[],this._={tx:0,ty:0,rt:{deg:0,cx:0,cy:0},sx:1,sy:1},!r.bottom&&(r.bottom=this),this.prev=r.top,r.top&&(r.top.next=this),r.top=this,this.next=null},Yt=Pt[f];Pt[f].rotate=function(e,r,i){if(this.removed)return this;if(null==e)return this._.rt.cx?[this._.rt.deg,this._.rt.cx,this._.rt.cy][T](_):this._.rt.deg;var s=this.getBBox();return e=B(e)[C](l),e[S]-1&&(r=U(e[1]),i=U(e[2])),e=U(e[0]),null!=r&&r!==!1?this._.rt.deg=e:this._.rt.deg+=e,null==i&&(r=null),this._.rt.cx=r,this._.rt.cy=i,r=null==r?s.x+s.width/2:r,i=null==i?s.y+s.height/2:i,this._.rt.deg?(this.transformations[0]=t.format("rotate({0} {1} {2})",this._.rt.deg,r,i),this.clip&&Lt(this.clip,{transform:t.format("rotate({0} {1} {2})",-this._.rt.deg,r,i)})):(this.transformations[0]=w,this.clip&&Lt(this.clip,{transform:w})),Lt(this.node,{transform:this.transformations[T](_)}),this},Pt[f].hide=function(){return!this.removed&&(this.node.style.display="none"),this},Pt[f].show=function(){return!this.removed&&(this.node.style.display=""),this},Pt[f].remove=function(){if(!this.removed){St(this,this.paper),this.node.parentNode.removeChild(this.node);for(var t in this)delete this[t];this.removed=!0}},Pt[f].getBBox=function(){if(this.removed)return this;if("path"==this.type)return yt(this.attrs.path);if("none"==this.node.style.display){this.show();var t=!0}var e={};try{e=this.node.getBBox()}catch(r){}finally{e=e||{}}if("text"==this.type){e={x:e.x,y:1/0,width:0,height:0};for(var i=0,s=this.node.getNumberOfChars();s>i;i++){var n=this.node.getExtentOfChar(i);n.y<e.y&&(e.y=n.y),n.y+n.height-e.y>e.height&&(e.height=n.y+n.height-e.y),n.x+n.width-e.x>e.width&&(e.width=n.x+n.width-e.x)}}return t&&this.hide(),e},Pt[f].attr=function(e,r){if(this.removed)return this;if(null==e){var i={};for(var s in this.attrs)this.attrs[p](s)&&(i[s]=this.attrs[s]);return this._.rt.deg&&(i.rotation=this.rotate()),(1!=this._.sx||1!=this._.sy)&&(i.scale=this.scale()),i.gradient&&"none"==i.fill&&(i.fill=i.gradient)&&delete i.gradient,i}if(null==r&&t.is(e,V))return"translation"==e?Ne.call(this):"rotation"==e?this.rotate():"scale"==e?this.scale():e==F&&"none"==this.attrs.fill&&this.attrs.gradient?this.attrs.gradient:this.attrs[e];if(null==r&&t.is(e,H)){for(var n={},a=0,o=e.length;o>a;a++)n[e[a]]=this.attr(e[a]);return n}if(null!=r){var h={};h[e]=r}else null!=e&&t.is(e,"object")&&(h=e);for(var l in this.paper.customAttributes)if(this.paper.customAttributes[p](l)&&h[p](l)&&t.is(this.paper.customAttributes[l],"function")){var c=this.paper.customAttributes[l].apply(this,[][b](h[l]));this.attrs[l]=h[l];for(var u in c)c[p](u)&&(h[u]=c[u])}return Ht(this,h),this},Pt[f].toFront=function(){if(this.removed)return this;this.node.parentNode[x](this.node);var t=this.paper;return t.top!=this&&Mt(this,t),this},Pt[f].toBack=function(){if(this.removed)return this;if(this.node.parentNode.firstChild!=this.node){this.node.parentNode.insertBefore(this.node,this.node.parentNode.firstChild),Gt(this,this.paper);this.paper}return this},Pt[f].insertAfter=function(t){if(this.removed)return this;var e=t.node||t[t.length-1].node;return e.nextSibling?e.parentNode.insertBefore(this.node,e.nextSibling):e.parentNode[x](this.node),Et(this,t,this.paper),this},Pt[f].insertBefore=function(t){if(this.removed)return this;var e=t.node||t[0].node;return e.parentNode.insertBefore(this.node,e),zt(this,t,this.paper),this},Pt[f].blur=function(t){var r=this;if(0!==+t){var i=Lt("filter"),s=Lt("feGaussianBlur");r.attrs.blur=t,i.id=e(),Lt(s,{stdDeviation:+t||1.5}),i.appendChild(s),r.paper.defs.appendChild(i),r._blur=i,Lt(r.node,{filter:"url(#"+i.id+")"})}else r._blur&&(r._blur.parentNode.removeChild(r._blur),delete r._blur,delete r.attrs.blur),r.node.removeAttribute("filter")};var Dt=function(t,e,r,i){var s=Lt("circle");t.canvas&&t.canvas[x](s);var n=new Pt(s,t);return n.attrs={cx:e,cy:r,r:i,fill:"none",stroke:"#000"},n.type="circle",Lt(s,n.attrs),n},Xt=function(t,e,r,i,s,n){var a=Lt("rect");t.canvas&&t.canvas[x](a);var o=new Pt(a,t);return o.attrs={x:e,y:r,width:i,height:s,r:n||0,rx:n||0,ry:n||0,fill:"none",stroke:"#000"},o.type="rect",Lt(a,o.attrs),o},Ot=function(t,e,r,i,s){var n=Lt("ellipse");t.canvas&&t.canvas[x](n);var a=new Pt(n,t);return a.attrs={cx:e,cy:r,rx:i,ry:s,fill:"none",stroke:"#000"},a.type="ellipse",Lt(n,a.attrs),a},It=function(t,e,r,i,s,n){var a=Lt("image");Lt(a,{x:r,y:i,width:s,height:n,preserveAspectRatio:"none"}),a.setAttributeNS(t.xlink,"href",e),t.canvas&&t.canvas[x](a);var o=new Pt(a,t);return o.attrs={x:r,y:i,width:s,height:n,src:e},o.type="image",o},$t=function(t,e,r,i){var s=Lt("text");Lt(s,{x:e,y:r,"text-anchor":"middle"}),t.canvas&&t.canvas[x](s);var n=new Pt(s,t);return n.attrs={x:e,y:r,"text-anchor":"middle",text:i,font:K.font,stroke:"none",fill:"#000"},n.type="text",Ht(n,n.attrs),n},Ut=function(t,e){return this.width=t||this.width,this.height=e||this.height,o(this.canvas,"width",this.width),o(this.canvas,"height",this.height),this},Zt=function(){var e=Nt[m](0,arguments),r=e&&e.container,i=e.x,s=e.y,n=e.width,a=e.height;if(!r)throw new Error("SVG container not found.");var o=Lt("svg");return i=i||0,s=s||0,n=n||512,a=a||342,Lt(o,{xmlns:"http://www.w3.org/2000/svg",version:1.1,width:n,height:a}),1==r?(o.style.cssText="position:absolute;left:"+i+"px;top:"+s+"px",d.body[x](o)):r.firstChild?r.insertBefore(o,r.firstChild):r[x](o),r=new g,r.width=n,r.height=a,r.canvas=o,Tt.call(r,r,t.fn),r.clear(),r};h.clear=function(){for(var t=this.canvas;t.firstChild;)t.removeChild(t.firstChild);this.bottom=this.top=null,(this.desc=Lt("desc"))[x](d.createTextNode("Created with Raphaël")),t[x](this.desc),t[x](this.defs=Lt("defs"))},h.remove=function(){this.canvas.parentNode&&this.canvas.parentNode.removeChild(this.canvas);for(var t in this)this[t]=Rt(t)}}if(t.vml){var Qt={M:"m",L:"l",C:"c",Z:"x",m:"t",l:"r",c:"v",z:"x"},Jt=/([clmz]),?([^clmz]*)/gi,Kt=/ progid:\S+Blur\([^\)]+\)/g,te=/-?[^,\s-]+/g,ee=1e3+_+1e3,re=10,ie={path:1,rect:1},se=function(t){var e=/[ahqstv]/gi,r=mt;if(B(t).match(e)&&(r=Ct),e=/[clmz]/g,r==mt&&!B(t).match(e)){var i=B(t)[et](Jt,function(t,e,r){var i=[],s="m"==M.call(e),n=Qt[e];return r[et](te,function(t){s&&2==i[S]&&(n+=i+Qt["m"==e?"l":"L"],i=[]),i[Y]($(t*re))}),n+i});return i}var s,n,a=r(t);i=[];for(var o=0,h=a[S];h>o;o++){s=a[o],n=M.call(a[o][0]),"z"==n&&(n="x");for(var l=1,c=s[S];c>l;l++)n+=$(s[l]*re)+(l!=c-1?",":w);i[Y](n)}return i[T](_)};t[W]=function(){return"Your browser doesn’t support SVG. Falling down to VML.\nYou are running Raphaël "+this.version},jt=function(t,e){var r=ne("group");r.style.cssText="position:absolute;left:0;top:0;width:"+e.width+"px;height:"+e.height+"px",r.coordsize=e.coordsize,r.coordorigin=e.coordorigin;var i=ne("shape"),s=i.style;s.width=e.width+"px",s.height=e.height+"px",i.coordsize=ee,i.coordorigin=e.coordorigin,r[x](i);var n=new Pt(i,r,e),a={fill:"none",stroke:"#000"};return t&&(a.path=t),n.type="path",n.path=[],n.Path=w,Ht(n,a),e.canvas[x](r),n},Ht=function(e,r){e.attrs=e.attrs||{};var s,n=e.node,a=e.attrs,o=n.style,h=(r.x!=a.x||r.y!=a.y||r.width!=a.width||r.height!=a.height||r.r!=a.r)&&"rect"==e.type,c=e;for(var u in r)r[p](u)&&(a[u]=r[u]);if(h&&(a.path=i(a.x,a.y,a.width,a.height,a.r),e.X=a.x,e.Y=a.y,e.W=a.width,e.H=a.height),r.href&&(n.href=r.href),r.title&&(n.title=r.title),r.target&&(n.target=r.target),r.cursor&&(o.cursor=r.cursor),"blur"in r&&e.blur(r.blur),(r.path&&"path"==e.type||h)&&(n.path=se(a.path)),null!=r.rotation&&e.rotate(r.rotation,!0),r.translation&&(s=B(r.translation)[C](l),Ne.call(e,s[0],s[1]),null!=e._.rt.cx&&(e._.rt.cx+=+s[0],e._.rt.cy+=+s[1],e.setBox(e.attrs,s[0],s[1]))),r.scale&&(s=B(r.scale)[C](l),e.scale(+s[0]||1,+s[1]||+s[0]||1,+s[2]||null,+s[3]||null)),"clip-rect"in r){var f=B(r["clip-rect"])[C](l);if(4==f[S]){f[2]=+f[2]+ +f[0],f[3]=+f[3]+ +f[1];var v=n.clipRect||d.createElement("div"),y=v.style,g=n.parentNode;y.clip=t.format("rect({1}px {2}px {3}px {0}px)",f),n.clipRect||(y.position="absolute",y.top=0,y.left=0,y.width=e.paper.width+"px",y.height=e.paper.height+"px",g.parentNode.insertBefore(v,g),v[x](g),n.clipRect=v)}r["clip-rect"]||n.clipRect&&(n.clipRect.style.clip=w)}if("image"==e.type&&r.src&&(n.src=r.src),"image"==e.type&&r.opacity&&(n.filterOpacity=Q+".Alpha(opacity="+100*r.opacity+")",o.filter=(n.filterMatrix||w)+(n.filterOpacity||w)),r.font&&(o.font=r.font),r["font-family"]&&(o.fontFamily='"'+r["font-family"][C](",")[0][et](/^['"]+|['"]+$/g,w)+'"'),r["font-size"]&&(o.fontSize=r["font-size"]),r["font-weight"]&&(o.fontWeight=r["font-weight"]),r["font-style"]&&(o.fontStyle=r["font-style"]),null!=r.opacity||null!=r["stroke-width"]||null!=r.fill||null!=r.stroke||null!=r["stroke-width"]||null!=r["stroke-opacity"]||null!=r["fill-opacity"]||null!=r["stroke-dasharray"]||null!=r["stroke-miterlimit"]||null!=r["stroke-linejoin"]||null!=r["stroke-linecap"]){
n=e.shape||n;var m=n.getElementsByTagName(F)&&n.getElementsByTagName(F)[0],b=!1;if(!m&&(b=m=ne(F)),"fill-opacity"in r||"opacity"in r){var k=((+a["fill-opacity"]+1||2)-1)*((+a.opacity+1||2)-1)*((+t.getRGB(r.fill).o+1||2)-1);k=z(E(k,0),1),m.opacity=k}if(r.fill&&(m.on=!0),(null==m.on||"none"==r.fill)&&(m.on=!1),m.on&&r.fill){var _=r.fill.match(D);_?(m.src=_[1],m.type="tile"):(m.color=t.getRGB(r.fill).hex,m.src=w,m.type="solid",t.getRGB(r.fill).error&&(c.type in{circle:1,ellipse:1}||"r"!=B(r.fill).charAt())&&qt(c,r.fill)&&(a.fill="none",a.gradient=r.fill))}b&&n[x](m);var A=n.getElementsByTagName("stroke")&&n.getElementsByTagName("stroke")[0],N=!1;!A&&(N=A=ne("stroke")),(r.stroke&&"none"!=r.stroke||r["stroke-width"]||null!=r["stroke-opacity"]||r["stroke-dasharray"]||r["stroke-miterlimit"]||r["stroke-linejoin"]||r["stroke-linecap"])&&(A.on=!0),("none"==r.stroke||null==A.on||0==r.stroke||0==r["stroke-width"])&&(A.on=!1);var T=t.getRGB(r.stroke);A.on&&r.stroke&&(A.color=T.hex),k=((+a["stroke-opacity"]+1||2)-1)*((+a.opacity+1||2)-1)*((+T.o+1||2)-1);var M=.75*(U(r["stroke-width"])||1);if(k=z(E(k,0),1),null==r["stroke-width"]&&(M=a["stroke-width"]),r["stroke-width"]&&(A.weight=M),M&&1>M&&(k*=M)&&(A.weight=1),A.opacity=k,r["stroke-linejoin"]&&(A.joinstyle=r["stroke-linejoin"]||"miter"),A.miterlimit=r["stroke-miterlimit"]||8,r["stroke-linecap"]&&(A.endcap="butt"==r["stroke-linecap"]?"flat":"square"==r["stroke-linecap"]?"square":"round"),r["stroke-dasharray"]){var G={"-":"shortdash",".":"shortdot","-.":"shortdashdot","-..":"shortdashdotdot",". ":"dot","- ":"dash","--":"longdash","- .":"dashdot","--.":"longdashdot","--..":"longdashdotdot"};A.dashstyle=G[p](r["stroke-dasharray"])?G[r["stroke-dasharray"]]:w}N&&n[x](A)}if("text"==c.type)switch(o=c.paper.span.style,a.font&&(o.font=a.font),a["font-family"]&&(o.fontFamily=a["font-family"]),a["font-size"]&&(o.fontSize=a["font-size"]),a["font-weight"]&&(o.fontWeight=a["font-weight"]),a["font-style"]&&(o.fontStyle=a["font-style"]),c.node.string&&(c.paper.span.innerHTML=B(c.node.string)[et](/</g,"&#60;")[et](/&/g,"&#38;")[et](/\n/g,"<br>")),c.W=a.w=c.paper.span.offsetWidth,c.H=a.h=c.paper.span.offsetHeight,c.X=a.x,c.Y=a.y+$(c.H/2),a["text-anchor"]){case"start":c.node.style["v-text-align"]="left",c.bbx=$(c.W/2);break;case"end":c.node.style["v-text-align"]="right",c.bbx=-$(c.W/2);break;default:c.node.style["v-text-align"]="center"}},qt=function(t,e){t.attrs=t.attrs||{};var r,i=(t.attrs,"linear"),s=".5 .5";if(t.attrs.gradient=e,e=B(e)[et](ht,function(t,e,r){return i="radial",e&&r&&(e=U(e),r=U(r),L(e-.5,2)+L(r-.5,2)>.25&&(r=G.sqrt(.25-L(e-.5,2))*(2*(r>.5)-1)+.5),s=e+_+r),w}),e=e[C](/\s*\-\s*/),"linear"==i){var n=e.shift();if(n=-U(n),isNaN(n))return null}var a=At(e);if(!a)return null;if(t=t.shape||t.node,r=t.getElementsByTagName(F)[0]||ne(F),!r.parentNode&&t.appendChild(r),a[S]){r.on=!0,r.method="none",r.color=a[0].color,r.color2=a[a[S]-1].color;for(var o=[],h=0,l=a[S];l>h;h++)a[h].offset&&o[Y](a[h].offset+_+a[h].color);r.colors&&(r.colors.value=o[S]?o[T]():"0% "+r.color),"radial"==i?(r.type="gradientradial",r.focus="100%",r.focussize=s,r.focusposition=s):(r.type="gradient",r.angle=(270-n)%360)}return 1},Pt=function(e,r,i){this[0]=e,this.id=t._oid++,this.node=e,e.raphael=this,this.X=0,this.Y=0,this.attrs={},this.Group=r,this.paper=i,this._={tx:0,ty:0,rt:{deg:0},sx:1,sy:1},!i.bottom&&(i.bottom=this),this.prev=i.top,i.top&&(i.top.next=this),i.top=this,this.next=null},Yt=Pt[f],Yt.rotate=function(t,e,r){return this.removed?this:null==t?this._.rt.cx?[this._.rt.deg,this._.rt.cx,this._.rt.cy][T](_):this._.rt.deg:(t=B(t)[C](l),t[S]-1&&(e=U(t[1]),r=U(t[2])),t=U(t[0]),null!=e?this._.rt.deg=t:this._.rt.deg+=t,null==r&&(e=null),this._.rt.cx=e,this._.rt.cy=r,this.setBox(this.attrs,e,r),this.Group.style.rotation=this._.rt.deg,this)},Yt.setBox=function(t,e,r){if(this.removed)return this;var i=this.Group.style,s=this.shape&&this.shape.style||this.node.style;t=t||{};for(var n in t)t[p](n)&&(this.attrs[n]=t[n]);e=e||this._.rt.cx,r=r||this._.rt.cy;var a,o,h,l,c=this.attrs;switch(this.type){case"circle":a=c.cx-c.r,o=c.cy-c.r,h=l=2*c.r;break;case"ellipse":a=c.cx-c.rx,o=c.cy-c.ry,h=2*c.rx,l=2*c.ry;break;case"image":a=+c.x,o=+c.y,h=c.width||0,l=c.height||0;break;case"text":this.textpath.v=["m",$(c.x),", ",$(c.y-2),"l",$(c.x)+1,", ",$(c.y-2)][T](w),a=c.x-$(this.W/2),o=c.y-this.H/2,h=this.W,l=this.H;break;case"rect":case"path":if(this.attrs.path){var u=yt(this.attrs.path);a=u.x,o=u.y,h=u.width,l=u.height}else a=0,o=0,h=this.paper.width,l=this.paper.height;break;default:a=0,o=0,h=this.paper.width,l=this.paper.height}e=null==e?a+h/2:e,r=null==r?o+l/2:r;var f,d=e-this.paper.width/2,v=r-this.paper.height/2;i.left!=(f=d+"px")&&(i.left=f),i.top!=(f=v+"px")&&(i.top=f),this.X=ie[p](this.type)?-d:a,this.Y=ie[p](this.type)?-v:o,this.W=h,this.H=l,ie[p](this.type)?(s.left!=(f=-d*re+"px")&&(s.left=f),s.top!=(f=-v*re+"px")&&(s.top=f)):"text"==this.type?(s.left!=(f=-d+"px")&&(s.left=f),s.top!=(f=-v+"px")&&(s.top=f)):(i.width!=(f=this.paper.width+"px")&&(i.width=f),i.height!=(f=this.paper.height+"px")&&(i.height=f),s.left!=(f=a-d+"px")&&(s.left=f),s.top!=(f=o-v+"px")&&(s.top=f),s.width!=(f=h+"px")&&(s.width=f),s.height!=(f=l+"px")&&(s.height=f))},Yt.hide=function(){return!this.removed&&(this.Group.style.display="none"),this},Yt.show=function(){return!this.removed&&(this.Group.style.display="block"),this},Yt.getBBox=function(){return this.removed?this:ie[p](this.type)?yt(this.attrs.path):{x:this.X+(this.bbx||0),y:this.Y,width:this.W,height:this.H}},Yt.remove=function(){if(!this.removed){St(this,this.paper),this.node.parentNode.removeChild(this.node),this.Group.parentNode.removeChild(this.Group),this.shape&&this.shape.parentNode.removeChild(this.shape);for(var t in this)delete this[t];this.removed=!0}},Yt.attr=function(e,r){if(this.removed)return this;if(null==e){var i={};for(var s in this.attrs)this.attrs[p](s)&&(i[s]=this.attrs[s]);return this._.rt.deg&&(i.rotation=this.rotate()),(1!=this._.sx||1!=this._.sy)&&(i.scale=this.scale()),i.gradient&&"none"==i.fill&&(i.fill=i.gradient)&&delete i.gradient,i}if(null==r&&t.is(e,"string"))return"translation"==e?Ne.call(this):"rotation"==e?this.rotate():"scale"==e?this.scale():e==F&&"none"==this.attrs.fill&&this.attrs.gradient?this.attrs.gradient:this.attrs[e];if(this.attrs&&null==r&&t.is(e,H)){var n,a={};for(s=0,n=e[S];n>s;s++)a[e[s]]=this.attr(e[s]);return a}var o;if(null!=r&&(o={},o[e]=r),null==r&&t.is(e,"object")&&(o=e),o){for(var h in this.paper.customAttributes)if(this.paper.customAttributes[p](h)&&o[p](h)&&t.is(this.paper.customAttributes[h],"function")){var l=this.paper.customAttributes[h].apply(this,[][b](o[h]));this.attrs[h]=o[h];for(var c in l)l[p](c)&&(o[c]=l[c])}o.text&&"text"==this.type&&(this.node.string=o.text),Ht(this,o),o.gradient&&({circle:1,ellipse:1}[p](this.type)||"r"!=B(o.gradient).charAt())&&qt(this,o.gradient),(!ie[p](this.type)||this._.rt.deg)&&this.setBox(this.attrs)}return this},Yt.toFront=function(){return!this.removed&&this.Group.parentNode[x](this.Group),this.paper.top!=this&&Mt(this,this.paper),this},Yt.toBack=function(){return this.removed?this:(this.Group.parentNode.firstChild!=this.Group&&(this.Group.parentNode.insertBefore(this.Group,this.Group.parentNode.firstChild),Gt(this,this.paper)),this)},Yt.insertAfter=function(t){return this.removed?this:(t.constructor==Te&&(t=t[t.length-1]),t.Group.nextSibling?t.Group.parentNode.insertBefore(this.Group,t.Group.nextSibling):t.Group.parentNode[x](this.Group),Et(this,t,this.paper),this)},Yt.insertBefore=function(t){return this.removed?this:(t.constructor==Te&&(t=t[0]),t.Group.parentNode.insertBefore(this.Group,t.Group),zt(this,t,this.paper),this)},Yt.blur=function(e){var r=this.node.runtimeStyle,i=r.filter;i=i.replace(Kt,w),0!==+e?(this.attrs.blur=e,r.filter=i+_+Q+".Blur(pixelradius="+(+e||1.5)+")",r.margin=t.format("-{0}px 0 0 -{0}px",$(+e||1.5))):(r.filter=i,r.margin=0,delete this.attrs.blur)},Dt=function(t,e,r,i){var s=ne("group"),n=ne("oval");n.style;s.style.cssText="position:absolute;left:0;top:0;width:"+t.width+"px;height:"+t.height+"px",s.coordsize=ee,s.coordorigin=t.coordorigin,s[x](n);var a=new Pt(n,s,t);return a.type="circle",Ht(a,{stroke:"#000",fill:"none"}),a.attrs.cx=e,a.attrs.cy=r,a.attrs.r=i,a.setBox({x:e-i,y:r-i,width:2*i,height:2*i}),t.canvas[x](s),a},Xt=function(t,e,r,s,n,a){var o=i(e,r,s,n,a),h=t.path(o),l=h.attrs;return h.X=l.x=e,h.Y=l.y=r,h.W=l.width=s,h.H=l.height=n,l.r=a,l.path=o,h.type="rect",h},Ot=function(t,e,r,i,s){var n=ne("group"),a=ne("oval");a.style;n.style.cssText="position:absolute;left:0;top:0;width:"+t.width+"px;height:"+t.height+"px",n.coordsize=ee,n.coordorigin=t.coordorigin,n[x](a);var o=new Pt(a,n,t);return o.type="ellipse",Ht(o,{stroke:"#000"}),o.attrs.cx=e,o.attrs.cy=r,o.attrs.rx=i,o.attrs.ry=s,o.setBox({x:e-i,y:r-s,width:2*i,height:2*s}),t.canvas[x](n),o},It=function(t,e,r,i,s,n){var a=ne("group"),o=ne("image");a.style.cssText="position:absolute;left:0;top:0;width:"+t.width+"px;height:"+t.height+"px",a.coordsize=ee,a.coordorigin=t.coordorigin,o.src=e,a[x](o);var h=new Pt(o,a,t);return h.type="image",h.attrs.src=e,h.attrs.x=r,h.attrs.y=i,h.attrs.w=s,h.attrs.h=n,h.setBox({x:r,y:i,width:s,height:n}),t.canvas[x](a),h},$t=function(e,r,i,s){var n=ne("group"),a=ne("shape"),o=a.style,h=ne("path"),l=(h.style,ne("textpath"));n.style.cssText="position:absolute;left:0;top:0;width:"+e.width+"px;height:"+e.height+"px",n.coordsize=ee,n.coordorigin=e.coordorigin,h.v=t.format("m{0},{1}l{2},{1}",$(10*r),$(10*i),$(10*r)+1),h.textpathok=!0,o.width=e.width,o.height=e.height,l.string=B(s),l.on=!0,a[x](l),a[x](h),n[x](a);var c=new Pt(l,n,e);return c.shape=a,c.textpath=h,c.type="text",c.attrs.text=s,c.attrs.x=r,c.attrs.y=i,c.attrs.w=1,c.attrs.h=1,Ht(c,{font:K.font,stroke:"none",fill:"#000"}),c.setBox(),e.canvas[x](n),c},Ut=function(t,e){var r=this.canvas.style;return t==+t&&(t+="px"),e==+e&&(e+="px"),r.width=t,r.height=e,r.clip="rect(0 "+t+" "+e+" 0)",this};var ne;d.createStyleSheet().addRule(".rvml","behavior:url(#default#VML)");try{!d.namespaces.rvml&&d.namespaces.add("rvml","urn:schemas-microsoft-com:vml"),ne=function(t){return d.createElement("<rvml:"+t+' class="rvml">')}}catch(ae){ne=function(t){return d.createElement("<"+t+' xmlns="urn:schemas-microsoft.com:vml" class="rvml">')}}Zt=function(){var e=Nt[m](0,arguments),r=e.container,i=e.height,s=e.width,n=e.x,a=e.y;if(!r)throw new Error("VML container not found.");var o=new g,h=o.canvas=d.createElement("div"),l=h.style;return n=n||0,a=a||0,s=s||512,i=i||342,s==+s&&(s+="px"),i==+i&&(i+="px"),o.width=1e3,o.height=1e3,o.coordsize=1e3*re+_+1e3*re,o.coordorigin="0 0",o.span=d.createElement("span"),o.span.style.cssText="position:absolute;left:-9999em;top:-9999em;padding:0;margin:0;line-height:1;display:inline;",h[x](o.span),l.cssText=t.format("top:0;left:0;width:{0};height:{1};display:inline-block;position:relative;clip:rect(0 {0} {1} 0);overflow:hidden",s,i),1==r?(d.body[x](h),l.left=n+"px",l.top=a+"px",l.position="absolute"):r.firstChild?r.insertBefore(h,r.firstChild):r[x](h),Tt.call(o,o,t.fn),o},h.clear=function(){this.canvas.innerHTML=w,this.span=d.createElement("span"),this.span.style.cssText="position:absolute;left:-9999em;top:-9999em;padding:0;margin:0;line-height:1;display:inline;",this.canvas[x](this.span),this.bottom=this.top=null},h.remove=function(){this.canvas.parentNode.removeChild(this.canvas);for(var t in this)this[t]=Rt(t);return!0}}var oe=navigator.userAgent.match(/Version\/(.*?)\s/);"Apple Computer, Inc."==navigator.vendor&&(oe&&oe[1]<4||"iP"==navigator.platform.slice(0,2))?h.safari=function(){var t=this.rect(-99,-99,this.width+99,this.height+99).attr({stroke:"none"});v.setTimeout(function(){t.remove()})}:h.safari=function(){};for(var he=function(){this.returnValue=!1},le=function(){return this.originalEvent.preventDefault()},ce=function(){this.cancelBubble=!0},ue=function(){return this.originalEvent.stopPropagation()},fe=function(){return d.addEventListener?function(t,e,r,i){var s=k&&N[e]?N[e]:e,n=function(s){if(k&&N[p](e))for(var n=0,a=s.targetTouches&&s.targetTouches.length;a>n;n++)if(s.targetTouches[n].target==t){var o=s;s=s.targetTouches[n],s.originalEvent=o,s.preventDefault=le,s.stopPropagation=ue;break}return r.call(i,s)};return t.addEventListener(s,n,!1),function(){return t.removeEventListener(s,n,!1),!0}}:d.attachEvent?function(t,e,r,i){var s=function(t){return t=t||v.event,t.preventDefault=t.preventDefault||he,t.stopPropagation=t.stopPropagation||ce,r.call(i,t)};t.attachEvent("on"+e,s);var n=function(){return t.detachEvent("on"+e,s),!0};return n}:void 0}(),pe=[],de=function(t){for(var e,r=t.clientX,i=t.clientY,s=d.documentElement.scrollTop||d.body.scrollTop,n=d.documentElement.scrollLeft||d.body.scrollLeft,a=pe.length;a--;){if(e=pe[a],k){for(var o,h=t.touches.length;h--;)if(o=t.touches[h],o.identifier==e.el._drag.id){r=o.clientX,i=o.clientY,(t.originalEvent?t.originalEvent:t).preventDefault();break}}else t.preventDefault();r+=n,i+=s,e.move&&e.move.call(e.move_scope||e.el,r-e.el._drag.x,i-e.el._drag.y,r,i,t)}},ve=function(e){t.unmousemove(de).unmouseup(ve);for(var r,i=pe.length;i--;)r=pe[i],r.el._drag={},r.end&&r.end.call(r.end_scope||r.start_scope||r.move_scope||r.el,e);pe=[]},ye=A[S];ye--;)!function(e){t[e]=Pt[f][e]=function(r,i){return t.is(r,"function")&&(this.events=this.events||[],this.events.push({name:e,f:r,unbind:fe(this.shape||this.node||d,e,r,i||this)})),this},t["un"+e]=Pt[f]["un"+e]=function(t){for(var r=this.events,i=r[S];i--;)if(r[i].name==e&&r[i].f==t)return r[i].unbind(),r.splice(i,1),!r.length&&delete this.events,this;return this}}(A[ye]);Yt.hover=function(t,e,r,i){return this.mouseover(t,r).mouseout(e,i||r)},Yt.unhover=function(t,e){return this.unmouseover(t).unmouseout(e)},Yt.drag=function(e,r,i,s,n,a){return this._drag={},this.mousedown(function(o){(o.originalEvent||o).preventDefault();var h=d.documentElement.scrollTop||d.body.scrollTop,l=d.documentElement.scrollLeft||d.body.scrollLeft;this._drag.x=o.clientX+l,this._drag.y=o.clientY+h,this._drag.id=o.identifier,r&&r.call(n||s||this,o.clientX+l,o.clientY+h,o),!pe.length&&t.mousemove(de).mouseup(ve),pe.push({el:this,move:e,end:i,move_scope:s,start_scope:n,end_scope:a})}),this},Yt.undrag=function(e,r,i){for(var s=pe.length;s--;)pe[s].el==this&&pe[s].move==e&&pe[s].end==i&&pe.splice(s++,1);!pe.length&&t.unmousemove(de).unmouseup(ve)},h.circle=function(t,e,r){return Dt(this,t||0,e||0,r||0)},h.rect=function(t,e,r,i,s){return Xt(this,t||0,e||0,r||0,i||0,s||0)},h.ellipse=function(t,e,r,i){return Ot(this,t||0,e||0,r||0,i||0)},h.path=function(e){return e&&!t.is(e,V)&&!t.is(e[0],H)&&(e+=w),jt(t.format[m](t,arguments),this)},h.image=function(t,e,r,i,s){return It(this,t||"about:blank",e||0,r||0,i||0,s||0)},h.text=function(t,e,r){return $t(this,t||0,e||0,B(r))},h.set=function(t){return arguments[S]>1&&(t=Array[f].splice.call(arguments,0,arguments[S])),new Te(t)},h.setSize=Ut,h.top=h.bottom=null,h.raphael=t,Yt.resetScale=function(){return this.removed?this:(this._.sx=1,this._.sy=1,void(this.attrs.scale="1 1"))},Yt.scale=function(t,e,r,i){if(this.removed)return this;if(null==t&&null==e)return{x:this._.sx,y:this._.sy,toString:s};e=e||t,!+e&&(e=t);var n,a,h=this.attrs;if(0!=t){var l=this.getBBox(),c=l.x+l.width/2,u=l.y+l.height/2,f=R(t/this._.sx),p=R(e/this._.sy);r=+r||0==r?r:c,i=+i||0==i?i:u;var d=this._.sx>0,v=this._.sy>0,y=~~(t/R(t)),g=~~(e/R(e)),x=f*y,m=p*g,k=this.node.style,B=r+R(c-r)*x*(c>r==d?1:-1),C=i+R(u-i)*m*(u>i==v?1:-1),A=t*y>e*g?p:f;switch(this.type){case"rect":case"image":var N=h.width*f,M=h.height*p;this.attr({height:M,r:h.r*A,width:N,x:B-N/2,y:C-M/2});break;case"circle":case"ellipse":this.attr({rx:h.rx*f,ry:h.ry*p,r:h.r*A,cx:B,cy:C});break;case"text":this.attr({x:B,y:C});break;case"path":for(var G=xt(h.path),E=!0,z=d?x:f,L=v?m:p,j=0,q=G[S];q>j;j++){var V=G[j],H=J.call(V[0]);if("M"!=H||!E)if(E=!1,"A"==H)V[G[j][S]-2]*=z,V[G[j][S]-1]*=L,V[1]*=f,V[2]*=p,V[5]=+(y+g?!!+V[5]:!+V[5]);else if("H"==H)for(var W=1,F=V[S];F>W;W++)V[W]*=z;else if("V"==H)for(W=1,F=V[S];F>W;W++)V[W]*=L;else for(W=1,F=V[S];F>W;W++)V[W]*=W%2?z:L}var P=yt(G);n=B-P.x-P.width/2,a=C-P.y-P.height/2,G[0][1]+=n,G[0][2]+=a,this.attr({path:G})}this.type in{text:1,image:1}&&(1!=y||1!=g)?this.transformations?(this.transformations[2]="scale("[b](y,",",g,")"),o(this.node,"transform",this.transformations[T](_)),n=-1==y?-h.x-(N||0):h.x,a=-1==g?-h.y-(M||0):h.y,this.attr({x:n,y:a}),h.fx=y-1,h.fy=g-1):(this.node.filterMatrix=Q+".Matrix(M11="[b](y,", M12=0, M21=0, M22=",g,", Dx=0, Dy=0, sizingmethod='auto expand', filtertype='bilinear')"),k.filter=(this.node.filterMatrix||w)+(this.node.filterOpacity||w)):this.transformations?(this.transformations[2]=w,o(this.node,"transform",this.transformations[T](_)),h.fx=0,h.fy=0):(this.node.filterMatrix=w,k.filter=(this.node.filterMatrix||w)+(this.node.filterOpacity||w)),h.scale=[t,e,r,i][T](_),this._.sx=t,this._.sy=e}return this},Yt.clone=function(){if(this.removed)return null;var t=this.attr();return delete t.scale,delete t.translation,this.paper[this.type]().attr(t)};var ge={},xe=function(e,r,i,s,n,a,o,h,l){if(e===i&&r===s&&n===o&&a==h){var c=o-e,u=h-r,f=Math.sqrt(c*c+u*u);if(null==l)return f;var p=l/f;return{start:{x:e,y:r},m:{x:e,y:r},n:{x:o,y:h},end:{x:o,y:h},x:e+p*c,y:r+p*u,alpha:90-180*G.atan(c/u)/j}}var d,v,y=0,g=100,x=[e,r,i,s,n,a,o,h].join(),m=ge[x];if(!m&&(ge[x]=m={data:[]}),m.timer&&clearTimeout(m.timer),m.timer=setTimeout(function(){delete ge[x]},2e3),null!=l){var b=xe(e,r,i,s,n,a,o,h);g=10*~~b}for(var k=0;g+1>k;k++){if(m.data[l]>k?v=m.data[k*g]:(v=t.findDotsAtSegment(e,r,i,s,n,a,o,h,k/g),m.data[k]=v),k&&(y+=L(L(d.x-v.x,2)+L(d.y-v.y,2),.5)),null!=l&&y>=l)return v;d=v}return null==l?y:void 0},me=function(e,r){return function(i,s,n){i=Ct(i);for(var a,o,h,l,c,u="",f={},p=0,d=0,v=i.length;v>d;d++){if(h=i[d],"M"==h[0])a=+h[1],o=+h[2];else{if(l=xe(a,o,h[1],h[2],h[3],h[4],h[5],h[6]),p+l>s){if(r&&!f.start){if(c=xe(a,o,h[1],h[2],h[3],h[4],h[5],h[6],s-p),u+=["C",c.start.x,c.start.y,c.m.x,c.m.y,c.x,c.y],n)return u;f.start=u,u=["M",c.x,c.y+"C",c.n.x,c.n.y,c.end.x,c.end.y,h[5],h[6]][T](),p+=l,a=+h[5],o=+h[6];continue}if(!e&&!r)return c=xe(a,o,h[1],h[2],h[3],h[4],h[5],h[6],s-p),{x:c.x,y:c.y,alpha:c.alpha}}p+=l,a=+h[5],o=+h[6]}u+=h}return f.end=u,c=e?p:r?f:t.findDotsAtSegment(a,o,h[1],h[2],h[3],h[4],h[5],h[6],1),c.alpha&&(c={x:c.x,y:c.y,alpha:c.alpha}),c}},be=me(1),ke=me(),we=me(0,1);Yt.getTotalLength=function(){return"path"==this.type?this.node.getTotalLength?this.node.getTotalLength():be(this.attrs.path):void 0},Yt.getPointAtLength=function(t){return"path"==this.type?ke(this.attrs.path,t):void 0},Yt.getSubpath=function(t,e){if("path"==this.type){if(R(this.getTotalLength()-e)<"1e-6")return we(this.attrs.path,t).end;var r=we(this.attrs.path,e,1);return t?we(r,t).end:r}},t.easing_formulas={linear:function(t){return t},"<":function(t){return L(t,3)},">":function(t){return L(t-1,3)+1},"<>":function(t){return t=2*t,1>t?L(t,3)/2:(t-=2,(L(t,3)+2)/2)},backIn:function(t){var e=1.70158;return t*t*((e+1)*t-e)},backOut:function(t){t-=1;var e=1.70158;return t*t*((e+1)*t+e)+1},elastic:function(t){if(0==t||1==t)return t;var e=.3,r=e/4;return L(2,-10*t)*G.sin(2*(t-r)*j/e)+1},bounce:function(t){var e,r=7.5625,i=2.75;return 1/i>t?e=r*t*t:2/i>t?(t-=1.5/i,e=r*t*t+.75):2.5/i>t?(t-=2.25/i,e=r*t*t+.9375):(t-=2.625/i,e=r*t*t+.984375),e}};var _e=[],Be=function(){for(var e=+new Date,r=0;r<_e[S];r++){var i=_e[r];if(!i.stop&&!i.el.removed){var s,n=e-i.start,a=i.ms,o=i.easing,h=i.from,l=i.diff,c=i.to,u=i.t,f=i.el,d={};if(a>n){var v=o(n/a);for(var y in h)if(h[p](y)){switch(tt[y]){case"along":s=v*a*l[y],c.back&&(s=c.len-s);var g=ke(c[y],s);f.translate(l.sx-l.x||0,l.sy-l.y||0),l.x=g.x,l.y=g.y,f.translate(g.x-l.sx,g.y-l.sy),c.rot&&f.rotate(l.r+g.alpha,g.x,g.y);break;case q:s=+h[y]+v*a*l[y];break;case"colour":s="rgb("+[Ae($(h[y].r+v*a*l[y].r)),Ae($(h[y].g+v*a*l[y].g)),Ae($(h[y].b+v*a*l[y].b))][T](",")+")";break;case"path":s=[];for(var x=0,m=h[y][S];m>x;x++){s[x]=[h[y][x][0]];for(var b=1,k=h[y][x][S];k>b;b++)s[x][b]=+h[y][x][b]+v*a*l[y][x][b];s[x]=s[x][T](_)}s=s[T](_);break;case"csv":switch(y){case"translation":var B=v*a*l[y][0]-u.x,C=v*a*l[y][1]-u.y;u.x+=B,u.y+=C,s=B+_+C;break;case"rotation":s=+h[y][0]+v*a*l[y][0],h[y][1]&&(s+=","+h[y][1]+","+h[y][2]);break;case"scale":s=[+h[y][0]+v*a*l[y][0],+h[y][1]+v*a*l[y][1],2 in c[y]?c[y][2]:w,3 in c[y]?c[y][3]:w][T](_);break;case"clip-rect":for(s=[],x=4;x--;)s[x]=+h[y][x]+v*a*l[y][x]}break;default:var A=[].concat(h[y]);for(s=[],x=f.paper.customAttributes[y].length;x--;)s[x]=+A[x]+v*a*l[y][x]}d[y]=s}f.attr(d),f._run&&f._run.call(f)}else c.along&&(g=ke(c.along,c.len*!c.back),f.translate(l.sx-(l.x||0)+g.x-l.sx,l.sy-(l.y||0)+g.y-l.sy),c.rot&&f.rotate(l.r+g.alpha,g.x,g.y)),(u.x||u.y)&&f.translate(-u.x,-u.y),c.scale&&(c.scale+=w),f.attr(c),_e.splice(r--,1)}}t.svg&&f&&f.paper&&f.paper.safari(),_e[S]&&setTimeout(Be)},Ce=function(e,r,i,s,n){var a=i-s;r.timeouts.push(setTimeout(function(){t.is(n,"function")&&n.call(r),r.animate(e,a,e.easing)},s))},Ae=function(t){return E(z(t,255),0)},Ne=function(t,e){if(null==t)return{x:this._.tx,y:this._.ty,toString:s};switch(this._.tx+=+t,this._.ty+=+e,this.type){case"circle":case"ellipse":this.attr({cx:+t+this.attrs.cx,cy:+e+this.attrs.cy});break;case"rect":case"image":case"text":this.attr({x:+t+this.attrs.x,y:+e+this.attrs.y});break;case"path":var r=xt(this.attrs.path);r[0][1]+=+t,r[0][2]+=+e,this.attr({path:r})}return this};Yt.animateWith=function(t,e,r,i,s){for(var n=0,a=_e.length;a>n;n++)_e[n].el.id==t.id&&(e.start=_e[n].start);return this.animate(e,r,i,s)},Yt.animateAlong=n(),Yt.animateAlongBack=n(1),Yt.onAnimation=function(t){return this._run=t||0,this},Yt.animate=function(e,r,i,s){var n=this;if(n.timeouts=n.timeouts||[],(t.is(i,"function")||!i)&&(s=i||null),n.removed)return s&&s.call(n),n;var o={},h={},c=!1,u={};for(var f in e)if(e[p](f)&&(tt[p](f)||n.paper.customAttributes[p](f)))switch(c=!0,o[f]=n.attr(f),null==o[f]&&(o[f]=K[f]),h[f]=e[f],tt[f]){case"along":var d=be(e[f]),v=ke(e[f],d*!!e.back),y=n.getBBox();u[f]=d/r,u.tx=y.x,u.ty=y.y,u.sx=v.x,u.sy=v.y,h.rot=e.rot,h.back=e.back,h.len=d,e.rot&&(u.r=U(n.rotate())||0);break;case q:u[f]=(h[f]-o[f])/r;break;case"colour":o[f]=t.getRGB(o[f]);var g=t.getRGB(h[f]);u[f]={r:(g.r-o[f].r)/r,g:(g.g-o[f].g)/r,b:(g.b-o[f].b)/r};break;case"path":var x=Ct(o[f],h[f]);o[f]=x[0];var m=x[1];u[f]=[];for(var b=0,k=o[f][S];k>b;b++){u[f][b]=[0];for(var w=1,_=o[f][b][S];_>w;w++)u[f][b][w]=(m[b][w]-o[f][b][w])/r}break;case"csv":var A=B(e[f])[C](l),N=B(o[f])[C](l);switch(f){case"translation":o[f]=[0,0],u[f]=[A[0]/r,A[1]/r];break;case"rotation":o[f]=N[1]==A[1]&&N[2]==A[2]?N:[0,A[1],A[2]],u[f]=[(A[0]-o[f][0])/r,0,0];break;case"scale":e[f]=A,o[f]=B(o[f])[C](l),u[f]=[(A[0]-o[f][0])/r,(A[1]-o[f][1])/r,0,0];break;case"clip-rect":for(o[f]=B(o[f])[C](l),u[f]=[],b=4;b--;)u[f][b]=(A[b]-o[f][b])/r}h[f]=A;break;default:for(A=[].concat(e[f]),N=[].concat(o[f]),u[f]=[],b=n.paper.customAttributes[f][S];b--;)u[f][b]=((A[b]||0)-(N[b]||0))/r}if(c){var T=t.easing_formulas[i];if(!T)if(T=B(i).match(I),T&&5==T[S]){var M=T;T=function(t){return a(t,+M[1],+M[2],+M[3],+M[4],r)}}else T=function(t){return t};_e.push({start:e.start||+new Date,ms:r,easing:T,from:o,diff:u,to:h,el:n,t:{x:0,y:0}}),t.is(s,"function")&&(n._ac=setTimeout(function(){s.call(n)},r)),1==_e[S]&&setTimeout(Be)}else{var G,E=[];for(var z in e)e[p](z)&&rt.test(z)&&(f={value:e[z]},"from"==z&&(z=0),"to"==z&&(z=100),f.key=Z(z,10),E.push(f));for(E.sort(lt),E[0].key&&E.unshift({key:0,value:n.attrs}),b=0,k=E[S];k>b;b++)Ce(E[b].value,n,r/100*E[b].key,r/100*(E[b-1]&&E[b-1].key||0),E[b-1]&&E[b-1].value.callback);G=E[E[S]-1].value.callback,G&&n.timeouts.push(setTimeout(function(){G.call(n)},r))}return this},Yt.stop=function(){for(var t=0;t<_e.length;t++)_e[t].el.id==this.id&&_e.splice(t--,1);for(t=0,ii=this.timeouts&&this.timeouts.length;t<ii;t++)clearTimeout(this.timeouts[t]);return this.timeouts=[],clearTimeout(this._ac),delete this._ac,this},Yt.translate=function(t,e){return this.attr({translation:t+" "+e})},Yt[W]=function(){return"Raphaël’s object"},t.ae=_e;var Te=function(t){if(this.items=[],this[S]=0,this.type="set",t)for(var e=0,r=t[S];r>e;e++)!t[e]||t[e].constructor!=Pt&&t[e].constructor!=Te||(this[this.items[S]]=this.items[this.items[S]]=t[e],this[S]++)};Te[f][Y]=function(){for(var t,e,r=0,i=arguments[S];i>r;r++)t=arguments[r],!t||t.constructor!=Pt&&t.constructor!=Te||(e=this.items[S],this[e]=this.items[e]=t,this[S]++);return this},Te[f].pop=function(){return delete this[this[S]--],this.items.pop()};for(var Se in Yt)Yt[p](Se)&&(Te[f][Se]=function(t){return function(){for(var e=0,r=this.items[S];r>e;e++)this.items[e][t][m](this.items[e],arguments);return this}}(Se));Te[f].attr=function(e,r){if(e&&t.is(e,H)&&t.is(e[0],"object"))for(var i=0,s=e[S];s>i;i++)this.items[i].attr(e[i]);else for(var n=0,a=this.items[S];a>n;n++)this.items[n].attr(e,r);return this},Te[f].animate=function(e,r,i,s){(t.is(i,"function")||!i)&&(s=i||null);var n,a,o=this.items[S],h=o,l=this;for(s&&(a=function(){!--o&&s.call(l)}),i=t.is(i,V)?i:a,n=this.items[--h].animate(e,r,i,a);h--;)this.items[h]&&!this.items[h].removed&&this.items[h].animateWith(n,e,r,i,a);return this},Te[f].insertAfter=function(t){for(var e=this.items[S];e--;)this.items[e].insertAfter(t);return this},Te[f].getBBox=function(){for(var t=[],e=[],r=[],i=[],s=this.items[S];s--;){var n=this.items[s].getBBox();t[Y](n.x),e[Y](n.y),r[Y](n.x+n.width),i[Y](n.y+n.height)}return t=z[m](0,t),e=z[m](0,e),{x:t,y:e,width:E[m](0,r)-t,height:E[m](0,i)-e}},Te[f].clone=function(t){t=new Te;for(var e=0,r=this.items[S];r>e;e++)t[Y](this.items[e].clone());return t},t.registerFont=function(t){if(!t.face)return t;this.fonts=this.fonts||{};var e={w:t.w,face:{},glyphs:{}},r=t.face["font-family"];for(var i in t.face)t.face[p](i)&&(e.face[i]=t.face[i]);if(this.fonts[r]?this.fonts[r][Y](e):this.fonts[r]=[e],!t.svg){e.face["units-per-em"]=Z(t.face["units-per-em"],10);for(var s in t.glyphs)if(t.glyphs[p](s)){var n=t.glyphs[s];if(e.glyphs[s]={w:n.w,k:{},d:n.d&&"M"+n.d[et](/[mlcxtrv]/g,function(t){return{l:"L",c:"C",x:"z",t:"m",r:"l",v:"c"}[t]||"M"})+"z"},n.k)for(var a in n.k)n[p](a)&&(e.glyphs[s].k[a]=n.k[a])}}return t},h.getFont=function(e,r,i,s){if(s=s||"normal",i=i||"normal",r=+r||{normal:400,bold:700,lighter:300,bolder:800}[r]||400,t.fonts){var n=t.fonts[e];if(!n){var a=new RegExp("(^|\\s)"+e[et](/[^\w\d\s+!~.:_-]/g,w)+"(\\s|$)","i");for(var o in t.fonts)if(t.fonts[p](o)&&a.test(o)){n=t.fonts[o];break}}var h;if(n)for(var l=0,c=n[S];c>l&&(h=n[l],h.face["font-weight"]!=r||h.face["font-style"]!=i&&h.face["font-style"]||h.face["font-stretch"]!=s);l++);return h}},h.print=function(e,r,i,s,n,a,o){a=a||"middle",o=E(z(o||0,1),-1);var h,c=this.set(),u=B(i)[C](w),f=0;if(t.is(s,i)&&(s=this.getFont(s)),s){h=(n||16)/s.face["units-per-em"];for(var p=s.face.bbox.split(l),d=+p[0],v=+p[1]+("baseline"==a?p[3]-p[1]+ +s.face.descent:(p[3]-p[1])/2),y=0,g=u[S];g>y;y++){var x=y&&s.glyphs[u[y-1]]||{},m=s.glyphs[u[y]];f+=y?(x.w||s.w)+(x.k&&x.k[u[y]]||0)+s.w*o:0,m&&m.d&&c[Y](this.path(m.d).attr({fill:"#000",stroke:"none",translation:[f,0]}))}c.scale(h,h,d,v).translate(e-d,r-v)}return c},t.format=function(e,r){var i=t.is(r,H)?[0][b](r):arguments;return e&&t.is(e,V)&&i[S]-1&&(e=e[et](u,function(t,e){return null==i[++e]?w:i[e]})),e||w},t.ninja=function(){return y.was?v.Raphael=y.is:delete Raphael,t},t.el=Yt,t.st=Te[f],y.was?v.Raphael=t:Raphael=t}();
},{}]},{},[4]);
