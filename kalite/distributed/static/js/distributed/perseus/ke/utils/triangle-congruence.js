(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
$.extend(KhanUtil,{initCongruence:function(t){t=$.extend({ticks:[],numArcs:[0,0,0],reflected:!1},t),t.sides=t.triangle.sideLengths.slice(),t.angles=t.triangle.angles.slice();var o,n=function(t){for(var o=t;Math.abs(o-t)<10;)o=Math.floor(70*KhanUtil.random())+10;return o},i=function(t){for(var o=t;Math.abs(o-t)<1;)o=30*KhanUtil.random()/10+1;return o};if("SSS"===t.type)t.angles[0]=n(t.angles[0]),t.angles[1]=n(t.angles[1]),t.angles[2]=n(t.angles[2]),t.ticks=[1,2,3],o=KhanUtil.addInteractiveTriangle(t),o.points[0].constraints.fixedDistance={dist:t.sides[0],point:o.points[1]},o.setRotationPoint(1),o.setRotationPoint(2),o.points[3].constraints.fixedDistance={dist:t.sides[2],point:o.points[2]},o.points[0].onMove=function(t,n){return o.points[0].coord=[t,n],KhanUtil.getDistance(o.points[0].coord,o.points[3].coord)<.3&&o.snapCorrect(),o.update(),o.points[0].coord},o.points[3].onMove=function(t,n){return o.points[3].coord=[t,n],KhanUtil.getDistance(o.points[0].coord,o.points[3].coord)<.3&&o.snapCorrect(),o.update(),o.points[3].coord},o.snapCorrect=function(){Math.abs((t.triangle.angles[1]*(o.reflected?-1:1)+360)%360-(KhanUtil.findAngle(this.points[0].coord,this.points[2].coord,this.points[1].coord)+360)%360)>90&&(o.reflected=!o.reflected),this.points[0].setCoord(this.points[0].applyConstraint(this.points[0].coord,{fixedAngle:{angle:t.triangle.angles[1]*(o.reflected?-1:1),vertex:this.points[1],ref:this.points[2]}})),this.points[3].setCoord(this.points[3].applyConstraint(this.points[3].coord,{fixedAngle:{angle:t.triangle.angles[2]*(o.reflected?1:-1),vertex:this.points[2],ref:this.points[1]}}))};else if("SSA"===t.type)t.angles[0]=n(t.angles[0]),t.angles[1]=n(t.angles[1]),t.sides[2]=i(t.sides[2]),t.ticks=[1,2,0],t.numArcs=[0,1,0],o=KhanUtil.addInteractiveTriangle(t),o.points[0].constraints.fixedDistance={dist:t.sides[0],point:o.points[1]},o.setRotationPoint(1),o.points[2].constraints.fixedDistance={dist:t.sides[1],point:o.points[1]},o.points[3].constraints.fixedAngle={angle:t.angles[2]*(o.reflected?1:-1),vertex:o.points[2],ref:o.points[1]},o.points[0].onMove=function(t,n){return o.points[0].coord=[t,n],KhanUtil.getDistance(o.points[0].coord,o.points[3].coord)<.2&&o.snapCorrect(),o.update(),o.points[0].coord},o.points[2].onMove=function(t,n){var i=o.points[2].coord;o.points[2].coord=[t,n],o.points[3].setCoord(o.points[3].applyConstraint(o.points[3].coord,{fixedDistance:{dist:KhanUtil.getDistance(o.points[3].coord,i),point:o.points[2]}})),KhanUtil.getDistance(o.points[0].coord,o.points[3].coord)<.2&&o.snapCorrect(),o.update()},o.points[3].onMove=function(t,n){return o.points[3].coord=[t,n],KhanUtil.getDistance(o.points[0].coord,o.points[3].coord)<.2&&o.snapCorrect(),o.update(),o.points[3].coord},o.snapCorrect=function(){var n=t.triangle.angles[1]*(o.reflected?-1:1);if(Math.abs(KhanUtil.getDistance(o.points[2].coord,o.points[3].coord)-t.triangle.sideLengths[2])>1){this.isCongruent=!1,n=Math.abs(n);var i=Math.abs(t.triangle.angles[2]*(o.reflected?-1:1));n=(180-2*i-n)*(o.reflected?-1:1)}else this.isCongruent=!0;this.points[0].setCoord(this.points[0].applyConstraint(this.points[0].coord,{fixedAngle:{angle:n,vertex:this.points[1],ref:this.points[2]}})),this.points[3].setCoord(this.points[0].coord)};else if("SAS"===t.type)t.angles[0]=n(t.angles[0]),t.sides[2]=i(t.sides[2]),t.angles[2]=n(t.angles[2]),t.ticks=[1,2,0],t.numArcs=[1,0,0],o=KhanUtil.addInteractiveTriangle(t),o.setRotationPoint(0),o.points[1].constraints.fixedDistance={dist:t.sides[1],point:o.points[2]},o.setRotationPoint(2),o.points[1].onMove=function(n,i){return o.points[1].coord=[n,i],o.points[0].setCoord(o.points[0].applyConstraint(o.points[0].coord,{fixedDistance:{dist:t.sides[0],point:o.points[1]},fixedAngle:{angle:t.angles[1]*(o.reflected?-1:1),vertex:o.points[1],ref:o.points[2]}})),KhanUtil.getDistance(o.points[0].coord,o.points[3].coord)<.2&&o.snapCorrect(),o.update(),o.points[1].coord},o.points[3].onMove=function(t,n){return o.points[3].coord=[t,n],KhanUtil.getDistance(o.points[0].coord,o.points[3].coord)<.2&&o.snapCorrect(),o.update(),o.points[3].coord},o.snapCorrect=function(){this.points[3].setCoord(this.points[0].coord)};else if("SAA"===t.type)t.angles[0]=n(t.angles[0]),t.sides[1]=i(t.sides[1]),t.sides[2]=i(t.sides[2]),t.ticks=[1,0,0],t.numArcs=[1,2,0],o=KhanUtil.addInteractiveTriangle(t),o.setRotationPoint(0),o.points[1].constraints.fixedAngle={angle:t.angles[2]*(o.reflected?-1:1),vertex:o.points[2],ref:o.points[3]},o.setRotationPoint(2),o.points[3].constraints.fixedAngle={angle:t.angles[2]*(o.reflected?1:-1),vertex:o.points[2],ref:o.points[1]},o.points[1].onMove=function(n,i){return o.points[1].coord=[n,i],o.points[0].setCoord(o.points[0].applyConstraint(o.points[0].coord,{fixedDistance:{dist:t.sides[0],point:o.points[1]},fixedAngle:{angle:t.angles[1]*(o.reflected?-1:1),vertex:o.points[1],ref:o.points[2]}})),KhanUtil.getDistance(o.points[0].coord,o.points[3].coord)<.3&&o.snapCorrect(),o.update(),o.points[1].coord},o.points[3].onMove=function(t,n){return o.points[3].coord=[t,n],KhanUtil.getDistance(o.points[0].coord,o.points[3].coord)<.3&&o.snapCorrect(),o.update(),o.points[3].coord},o.snapCorrect=function(){this.points[1].setCoord(this.points[1].applyConstraint(this.points[1].coord,{fixedDistance:{dist:t.triangle.sideLengths[1],point:this.points[2]}})),this.points[0].setCoord(this.points[0].applyConstraint(this.points[0].coord,{fixedDistance:{dist:t.triangle.sideLengths[0],point:this.points[1]},fixedAngle:{angle:t.angles[1]*(this.reflected?-1:1),vertex:this.points[1],ref:this.points[2]}})),this.points[3].setCoord(this.points[3].applyConstraint(this.points[3].coord,{fixedDistance:{dist:t.triangle.sideLengths[2],point:this.points[2]}}))};else if("ASA"===t.type)t.sides[0]=i(t.sides[0]),t.angles[0]=n(t.angles[0]),t.sides[2]=i(t.sides[2]),t.ticks=[0,1,0],t.numArcs=[1,2,0],o=KhanUtil.addInteractiveTriangle(t),o.points[0].constraints.fixedAngle={angle:t.angles[1]*(o.reflected?-1:1),vertex:o.points[1],ref:o.points[2]},o.setRotationPoint(1),o.setRotationPoint(2),o.points[3].constraints.fixedAngle={angle:t.angles[2]*(o.reflected?1:-1),vertex:o.points[2],ref:o.points[1]},o.points[0].onMove=function(t,n){return o.points[0].coord=[t,n],KhanUtil.getDistance(o.points[0].coord,o.points[3].coord)<.3&&o.snapCorrect(),o.update(),o.points[0].coord},o.points[3].onMove=function(t,n){return o.points[3].coord=[t,n],KhanUtil.getDistance(o.points[0].coord,o.points[3].coord)<.3&&o.snapCorrect(),o.update(),o.points[3].coord},o.snapCorrect=function(){this.points[0].setCoord(this.points[0].applyConstraint(this.points[0].coord,{fixedDistance:{dist:t.triangle.sideLengths[0],point:this.points[1]}})),this.points[3].setCoord(this.points[3].applyConstraint(this.points[3].coord,{fixedDistance:{dist:t.triangle.sideLengths[2],point:this.points[2]}}))};else if("AAA"===t.type){var s=KhanUtil.random()<.5?1:KhanUtil.random()>.5?.4*KhanUtil.random()+1.2:.2*KhanUtil.random()+.6;t.sides[0]*=s,t.sides[1]*=s,t.sides[2]*=s,t.numArcs=[2,3,1],o=KhanUtil.addInteractiveTriangle(t),o.isCongruent=1===s,o.points[0].visibleShape.remove(),o.points[0].mouseTarget.remove(),o.points[0].visible=!1,o.setRotationPoint(1),o.setRotationPoint(2),o.points[3].constraints.fixedAngle={angle:KhanUtil.findAngle(o.points[3].coord,o.points[1].coord,o.rotationPoint.coord),vertex:o.rotationPoint,ref:o.points[1]},o.points[3].onMove=function(n,i){o.points[3].coord=[n,i],o.points[0].setCoord([n,i]);var s=KhanUtil.getDistance([n,i],o.rotationPoint.coord)/o.radii[3];return o.points[1].setCoord(o.points[1].applyConstraint(o.points[1].coord,{fixedDistance:{dist:o.radii[1]*s,point:o.rotationPoint}})),o.points[2].setCoord(o.points[2].applyConstraint(o.points[2].coord,{fixedDistance:{dist:o.radii[2]*s,point:o.rotationPoint}})),Math.abs(KhanUtil.getDistance(o.points[0].coord,o.points[1].coord)-t.triangle.sideLengths[0])<.3?(o.snapCorrect(),o.isCongruent=!0):o.isCongruent=!1,o.update(),o.points[3].coord},o.snapCorrect=function(){this.points[3].setCoord(this.points[0].applyConstraint(this.points[0].coord,{fixedDistance:{dist:KhanUtil.getDistance(t.triangle.points[0],t.triangle.centroid),point:this.rotationPoint}})),this.points[0].setCoord(this.points[3].coord),this.points[1].setCoord(this.points[1].applyConstraint(this.points[1].coord,{fixedDistance:{dist:KhanUtil.getDistance(t.triangle.points[1],t.triangle.centroid),point:this.rotationPoint}})),this.points[2].setCoord(this.points[2].applyConstraint(this.points[2].coord,{fixedDistance:{dist:KhanUtil.getDistance(t.triangle.points[2],t.triangle.centroid),point:this.rotationPoint}}))}}KhanUtil.currentGraph.interactiveTriangle=o},addInteractiveTriangle:function(t){var o=$.extend({points:[],lines:[],numArcs:t.numArcs,arcs:[],radii:[],reflected:!1,animating:!1,isCongruent:!0,isTriangle:!1},t);o.update=function(){if(!KhanUtil.dragging){if(Math.abs(o.points[0].coord[0]-o.points[3].coord[0])<.001&&Math.abs(o.points[0].coord[1]-o.points[3].coord[1])<.001)o.isTriangle=!0,o.rotationPoint.setCoord([1/3*(o.points[0].coord[0]+o.points[1].coord[0]+o.points[2].coord[0]),1/3*(o.points[0].coord[1]+o.points[1].coord[1]+o.points[2].coord[1])]);else{o.isTriangle=!1;var n=Math.min(o.points[0].coord[0],o.points[1].coord[0],o.points[2].coord[0],o.points[3].coord[0]),i=Math.max(o.points[0].coord[0],o.points[1].coord[0],o.points[2].coord[0],o.points[3].coord[0]),s=Math.min(o.points[0].coord[1],o.points[1].coord[1],o.points[2].coord[1],o.points[3].coord[1]),e=Math.max(o.points[0].coord[1],o.points[1].coord[1],o.points[2].coord[1],o.points[3].coord[1]);o.rotationPoint.setCoord([(i-n)/2+n,(e-s)/2+s])}for(var r=0;4>r;++r)o.radii[r]=KhanUtil.getDistance(o.points[r].coord,o.rotationPoint.coord),o.points[r].isRotationPoint&&(o.points[r].constraints.fixedDistance={dist:o.radii[r],point:o.rotationPoint})}var a=KhanUtil.currentGraph;a.style({stroke:KhanUtil.BLUE,opacity:1,"stroke-width":2});for(var p=0;2>p;++p)$(o.arcs[p]).each(function(){this.remove()}),o.arcs[p]=a.drawArcs(o.points[p].coord,o.points[p+1].coord,o.points[p+2].coord,t.numArcs[p]);t.numArcs[2]&&($(o.arcs[2]).each(function(){this.remove()}),o.arcs[p]=a.drawArcs(o.points[2].coord,o.points[3].coord,o.points[1].coord,t.numArcs[2])),$(o.lines).each(function(){this.transform(!0),this.toFront()}),$(o.points).each(function(){this.toFront()})},o.setRotationPoint=function(t){o.points[t].isRotationPoint=!0,o.points[t].normalStyle={fill:KhanUtil.BLUE,stroke:KhanUtil.BLUE,scale:1},o.points[t].highlightStyle={fill:KhanUtil.BLUE,stroke:KhanUtil.BLUE,scale:1.5},o.points[t].visibleShape.attr(o.points[t].normalStyle),o.points[t].constraints.fixedDistance={dist:o.radii[t],point:o.rotationPoint},o.points[t].onMove=function(n,i){for(var s=KhanUtil.findAngle([n,i],o.points[t].coord,o.rotationPoint.coord)*Math.PI/180,e=0;4>e;++e)e!==t&&o.points[e].setCoord([(o.points[e].coord[0]-o.rotationPoint.coord[0])*Math.cos(s)-(o.points[e].coord[1]-o.rotationPoint.coord[1])*Math.sin(s)+o.rotationPoint.coord[0],(o.points[e].coord[0]-o.rotationPoint.coord[0])*Math.sin(s)+(o.points[e].coord[1]-o.rotationPoint.coord[1])*Math.cos(s)+o.rotationPoint.coord[1]]);o.points[t].coord=[n,i],o.update()}},$(".question").prepend("<button id='reflect' type='button'>"+i18n._("Reflect shape")+"</button>"),$("button#reflect").bind("click",function(t){if(this.blur(),!o.animating){o.animating=!0;var n=$.map(o.points,function(t){return[t.coord.slice()]}),i=Math.min.apply(Math,$.map(n,function(t){return t[0]})),s=Math.max.apply(Math,$.map(n,function(t){return t[0]})),e=(i+s)/2,r=$.map(o.points,function(t){return[[e-t.coord[0]+e,t.coord[1]]]});$(o.points).each(function(t,o){"number"==typeof o.constraints.fixedAngle.angle&&(o.constraints.fixedAngle.angle*=-1)}),o.reflected=!o.reflected,$(o.arcs[0]).each(function(){this.remove()}),$(o.arcs[1]).each(function(){this.remove()}),$(o.arcs[2]).each(function(){this.remove()});var a={0:n[0][0],1:n[1][0],2:n[2][0],3:n[3][0]};$(a).animate({0:r[0][0],1:r[1][0],2:r[2][0],3:r[3][0]},{duration:500,easing:"linear",step:function(t,n){$(o.points).each(function(t){this.setCoord([a[t],r[t][1]])}),$(o.lines).each(function(){this.transform(!0)})},complete:function(){$(o.points).each(function(t){this.setCoord(r[t])}),o.update(),o.animating=!1}})}});var n=t.angles.slice();t.reflected||$(n).each(function(t){n[t]*=-1});var i=KhanUtil.currentGraph,s=[0,0];o.points.push(i.addMovablePoint({coord:s})),s[0]+=t.sides[0]*Math.cos(n[0]*Math.PI/180),s[1]+=t.sides[0]*Math.sin(n[0]*Math.PI/180),o.points.push(i.addMovablePoint({coord:s,bounded:!1})),s[0]+=t.sides[1]*Math.cos(-(180-n[1]-n[0])*Math.PI/180),s[1]+=t.sides[1]*Math.sin(-(180-n[1]-n[0])*Math.PI/180),o.points.push(i.addMovablePoint({coord:s,bounded:!1})),s[0]+=t.sides[2]*Math.cos((n[2]+n[1]+n[0])*Math.PI/180),s[1]+=t.sides[2]*Math.sin((n[2]+n[1]+n[0])*Math.PI/180),o.points.push(i.addMovablePoint({coord:s,bounded:!1})),o.lines.push(i.addMovableLineSegment({pointA:o.points[0],pointZ:o.points[1],ticks:t.ticks[0],highlightStyle:{stroke:KhanUtil.BLUE,"stroke-width":4}})),o.lines.push(i.addMovableLineSegment({pointA:o.points[1],pointZ:o.points[2],ticks:t.ticks[1],highlightStyle:{stroke:KhanUtil.BLUE,"stroke-width":4}})),o.lines.push(i.addMovableLineSegment({pointA:o.points[2],pointZ:o.points[3],ticks:t.ticks[2],highlightStyle:{stroke:KhanUtil.BLUE,"stroke-width":4}})),o.rotationPoint=i.addMovablePoint({visible:!1});var e=4-Math.max(o.points[0].coord[0],o.points[1].coord[0],o.points[2].coord[0],o.points[3].coord[0]),r=4-Math.max(o.points[0].coord[1],o.points[1].coord[1],o.points[2].coord[1],o.points[3].coord[1]);$(o.points).each(function(){this.setCoord([this.coord[0]+e,this.coord[1]+r])});for(var a=0;3>a;++a)o.lines[a].onMove=function(t,n){$(o.points).each(function(){this.setCoord([this.coord[0]+t,this.coord[1]+n])}),o.update()},o.lines[a].onMoveEnd=function(){o.update()};for(var p=0;4>p;++p)o.points[p].onMoveEnd=function(t,n){o.update()};return o.update(),o},addTriangleDecorations:function(t,o){var n=[0,0,0],i=[0,0,0];"SSS"===o?n=[1,2,3]:"SSA"===o?(i=[0,0,1],n=[1,2,0]):"SAS"===o?(i=[0,1,0],n=[1,2,0]):"SAA"===o?(i=[0,1,2],n=[1,0,0]):"ASA"===o?(i=[0,1,2],n=[0,1,0]):"AAA"===o&&(i=[1,2,3]);var s=KhanUtil.currentGraph;s.addMovableLineSegment({coordA:t.points[0],coordZ:t.points[1],fixed:!0,ticks:n[0],normalStyle:{stroke:"#b1c9f5","stroke-width":2}}),s.addMovableLineSegment({coordA:t.points[1],coordZ:t.points[2],fixed:!0,ticks:n[1],normalStyle:{stroke:"#b1c9f5","stroke-width":2}}),s.addMovableLineSegment({coordA:t.points[2],coordZ:t.points[0],fixed:!0,ticks:n[2],normalStyle:{stroke:"#b1c9f5","stroke-width":2}}),s.drawArcs(t.points[2],t.points[0],t.points[1],i[0]),s.drawArcs(t.points[0],t.points[1],t.points[2],i[1]),s.drawArcs(t.points[1],t.points[2],t.points[0],i[2]),$(t.set).each(function(){this.toBack()})}});
},{}]},{},[1]);
