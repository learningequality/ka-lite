(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
require("../third_party/jquery.mobile.vmouse.js"),$.extend(KhanUtil,{FN_COLOR:"#6495ED",DDX_COLOR:"#FFA500",TANGENT_COLOR:"#AAA",TANGENT_LINE_LENGTH:200,TANGENT_GROWTH_FACTOR:3,TANGENT_SHIFT:5,initAutoscaledGraph:function(t,a){var n=KhanUtil.currentGraph;a=$.extend({xpixels:500,ypixels:500,xdivisions:20,ydivisions:20,labels:!0,unityLabels:!0,range:"undefined"==typeof t?[[-10,10],[-10,10]]:t},a),a.scale=[a.xpixels/(a.range[0][1]-a.range[0][0]),a.ypixels/(a.range[1][1]-a.range[1][0])],a.gridStep=[(a.range[0][1]-a.range[0][0])/a.xdivisions,(a.range[1][1]-a.range[1][0])/a.ydivisions],n.xpixels=a.xpixels,n.ypixels=a.ypixels,n.range=a.range,n.scale=a.scale,n.graphInit(a)},initDerivativeIntuition:function(t,a,n){var e=KhanUtil.currentGraph;KhanUtil.fnx=t,KhanUtil.ddx=a,KhanUtil.points=n,KhanUtil.highlight=!1,KhanUtil.dragging=!1,KhanUtil.ddxShown=!1,e.tangentLines=[],e.tangentPoints=[],e.slopePoints=[],e.mouseTargets=[],e.mouselayer=Raphael("ddxplot",e.xpixels,e.ypixels),$(e.mouselayer.canvas).css("z-index",1),Khan.scratchpad.disable(),$(n).each(function(t,a){KhanUtil.plotTangentLine(t)}),$(n).each(function(t,a){KhanUtil.plotTangentPoint(t),KhanUtil.plotSlopePoint(t)}),$(Exercises).one("newProblem",function(){$(n).each(function(t,a){KhanUtil.setSlope(t,0)})})},plotTangentLine:function(t){var a=KhanUtil.currentGraph,n=KhanUtil.points[t],e=KhanUtil.fnx(n),i=n,l=e,s=0,o=KhanUtil.ddx(n),r=(KhanUtil.ddx(n-.001)-KhanUtil.ddx(n+.001))/.002;0!==o?(s=-1/(o*(a.scale[1]/a.scale[0]))/(a.scale[1]/a.scale[0]),r>0&&s>0||0>r&&0>s?(i=n+Math.cos(Math.atan(s*(a.scale[1]/a.scale[0])))*KhanUtil.TANGENT_SHIFT/(2*a.scale[0]),l=s*(i-n)+e):(0>r&&s>0||r>0&&0>s)&&(i=n-Math.cos(Math.atan(s*(a.scale[1]/a.scale[0])))*KhanUtil.TANGENT_SHIFT/(2*a.scale[0]),l=s*(i-n)+e)):0>r?l=e-KhanUtil.TANGENT_SHIFT/(2*a.scale[1]):r>0&&(l=e+KhanUtil.TANGENT_SHIFT/(2*a.scale[1])),a.style({stroke:KhanUtil.TANGENT_COLOR,strokeWidth:2},function(){a.tangentLines[t]=a.line([i-KhanUtil.TANGENT_LINE_LENGTH/(2*a.scale[0]),l],[i+KhanUtil.TANGENT_LINE_LENGTH/(2*a.scale[0]),l])})},plotTangentPoint:function(t){var a=KhanUtil.currentGraph,n=KhanUtil.points[t];a.style({fill:KhanUtil.FN_COLOR,stroke:KhanUtil.FN_COLOR},function(){a.tangentPoints[t]=a.ellipse([n,KhanUtil.fnx(n)],[4/a.scale[0],4/a.scale[1]])})},plotSlopePoint:function(t){var a=KhanUtil.currentGraph,n=KhanUtil.points[t];a.style({fill:KhanUtil.DDX_COLOR,stroke:KhanUtil.DDX_COLOR},function(){a.slopePoints[t]=a.ellipse([n,0],[4/a.scale[0],4/a.scale[1]])});var e=$("#ddxplot"),i=$("div#solutionarea :text").eq(t),l=$("div#solutionarea .answer-label").eq(t);a.mouseTargets[t]=a.mouselayer.circle((n-a.range[0][0])*a.scale[0],(a.range[1][1]-0)*a.scale[1],22),a.mouseTargets[t].attr({fill:"#000",opacity:0}),$(a.mouseTargets[t][0]).css("cursor","move"),$(a.mouseTargets[t][0]).bind("vmousedown vmouseover vmouseout",function(a){a.preventDefault();var n=KhanUtil.currentGraph;if("vmouseover"===a.type)KhanUtil.highlight=!0,KhanUtil.dragging||(n.slopePoints[t].animate({scale:2},50),n.tangentLines[t].animate({stroke:KhanUtil.DDX_COLOR},100));else if("vmouseout"===a.type)KhanUtil.highlight=!1,KhanUtil.dragging||(n.slopePoints[t].animate({scale:1},50),n.tangentLines[t].animate({stroke:KhanUtil.TANGENT_COLOR},100));else if("vmousedown"===a.type&&(1===a.which||0===a.which)){a.preventDefault(),n.tangentLines[t].toFront(),n.tangentPoints[t].toFront(),n.slopePoints[t].toFront(),n.tangentLines[t].animate({scale:KhanUtil.TANGENT_GROWTH_FACTOR},200),KhanUtil.dragging=!0;var s=e.offset().top;$(document).bind("vmousemove vmouseup",function(a){a.preventDefault();var e=a.pageY-s;e=Math.max(10,Math.min(n.ypixels-10,e));var o=n.range[1][1]-e/n.scale[1];if("vmousemove"===a.type)i.val(KhanUtil.roundTo(2,o)),l.text(KhanUtil.roundTo(2,o)),n.tangentLines[t].rotate(-Math.atan(o*(n.scale[1]/n.scale[0]))*(180/Math.PI),!0),n.slopePoints[t].attr("cy",e),n.mouseTargets[t].attr("cy",e);else if("vmouseup"===a.type){$(document).unbind("vmousemove vmouseup"),KhanUtil.setSlope(t,o),KhanUtil.dragging=!1,n.tangentLines[t].animate({scale:1},200),KhanUtil.highlight||(n.slopePoints[t].animate({scale:1},200),n.tangentLines[t].animate({stroke:KhanUtil.TANGENT_COLOR},100));var r=$.map($("div#solutionarea .answer-label"),function(t){return parseFloat($(t).text())}),h=$.map(KhanUtil.points,function(t){return KhanUtil.roundTo(2,KhanUtil.ddx(t))});r.join()===h.join()&&KhanUtil.revealDerivative(400)}})}})},setSlope:function(t,a){var n=KhanUtil.currentGraph,e=KhanUtil.ddx(KhanUtil.points[t]),i=Math.abs(Math.atan(e*n.scale[1]/n.scale[0])-Math.atan(a*n.scale[1]/n.scale[0]))*(180/Math.PI);7>i&&(a=e),$($("div#solutionarea :text")[t]).val(KhanUtil.roundTo(2,a)),$($("div#solutionarea .answer-label")[t]).text(KhanUtil.roundTo(2,a)),n.tangentLines[t].rotate(-Math.atan(a*(n.scale[1]/n.scale[0]))*(180/Math.PI),!0),n.slopePoints[t].attr("cy",(n.range[1][1]-a)*n.scale[1]),n.mouseTargets[t].attr("cy",(n.range[1][1]-a)*n.scale[1])},revealDerivative:function(t){if(!KhanUtil.ddxShown){var a,n=KhanUtil.currentGraph;t=t||0,n.style({stroke:KhanUtil.DDX_COLOR,strokeWidth:1,opacity:0===t?1:0},function(){a=n.plot(function(t){return KhanUtil.ddx(t)},KhanUtil.tmpl.getVAR("XRANGE"))}),$("span#ddxspan").show(),$("span#ddxspan").fadeTo(t,1),a.animate({opacity:1},t),KhanUtil.ddxShown=!0}}});
},{"../third_party/jquery.mobile.vmouse.js":2}],2:[function(require,module,exports){
!function(t,e,n,o){function a(t){for(;t&&"undefined"!=typeof t.originalEvent;)t=t.originalEvent;return t}function i(e,n){var i,r,u,s,c,h,v,d,l=e.type;if(e=t.Event(e),e.type=n,i=e.originalEvent,r=t.event.props,l.search(/mouse/)>-1&&(r=I),i)for(v=r.length,s;v;)s=r[--v],e[s]=i[s];if(l.search(/mouse(down|up)|click/)>-1&&!e.which&&(e.which=1),-1!==l.search(/^touch/)&&(u=a(i),l=u.touches,c=u.changedTouches,h=l&&l.length?l[0]:c&&c.length?c[0]:o))for(d=0,len=Y.length;d<len;d++)s=Y[d],e[s]=h[s];return e}function r(e){for(var n,o,a={};e;){n=t.data(e,y);for(o in n)n[o]&&(a[o]=a.hasVirtualBinding=!0);e=e.parentNode}return a}function u(e,n){for(var o;e;){if(o=t.data(e,y),o&&(!n||o[n]))return e;e=e.parentNode}return null}function s(){V=!1}function c(){V=!0}function h(){z=0,L.length=0,S=!1,c()}function v(){s()}function d(){l(),B=setTimeout(function(){B=0,h()},t.vmouse.resetTimerDuration)}function l(){B&&(clearTimeout(B),B=0)}function f(e,n,o){var a;return(o&&o[e]||!o&&u(n.target,e))&&(a=i(n,e),t(n.target).trigger(a)),a}function p(e){var n=t.data(e.target,P);if(!(S||z&&z===n)){var o=f("v"+e.type,e);o&&(o.isDefaultPrevented()&&e.preventDefault(),o.isPropagationStopped()&&e.stopPropagation(),o.isImmediatePropagationStopped()&&e.stopImmediatePropagation())}}function g(e){var n,o,i=a(e).touches;if(i&&1===i.length&&(n=e.target,o=r(n),o.hasVirtualBinding)){z=q++,t.data(n,P,z),l(),v(),H=!1;var u=a(e).touches[0];N=u.pageX,x=u.pageY,f("vmouseover",e,o),f("vmousedown",e,o)}}function m(t){V||(H||f("vmousecancel",t,r(t.target)),H=!0,d())}function b(e){if(!V){var n=a(e).touches[0],o=H,i=t.vmouse.moveDistanceThreshold;H=H||Math.abs(n.pageX-N)>i||Math.abs(n.pageY-x)>i,flags=r(e.target),H&&!o&&f("vmousecancel",e,flags),f("vmousemove",e,flags),d()}}function D(t){if(!V){c();var e,n=r(t.target);if(f("vmouseup",t,n),!H){var o=f("vclick",t,n);o&&o.isDefaultPrevented()&&(e=a(t).changedTouches[0],L.push({touchID:z,x:e.clientX,y:e.clientY}),S=!0)}f("vmouseout",t,n),H=!1,d()}}function T(e){var n,o=t.data(e,y);if(o)for(n in o)if(o[n])return!0;return!1}function k(){}function w(e){var n=e.substr(1);return{setup:function(o,a){T(this)||t.data(this,y,{});var i=t.data(this,y);i[e]=!0,M[e]=(M[e]||0)+1,1===M[e]&&Q.bind(n,p),t(this).bind(n,k),j&&(M.touchstart=(M.touchstart||0)+1,1===M.touchstart&&Q.bind("touchstart",g).bind("touchend",D).bind("touchmove",b).bind("scroll",m))},teardown:function(o,a){--M[e],M[e]||Q.unbind(n,p),j&&(--M.touchstart,M.touchstart||Q.unbind("touchstart",g).unbind("touchmove",b).unbind("touchend",D).unbind("scroll",m));var i=t(this),r=t.data(this,y);r&&(r[e]=!1),i.unbind(n,k),T(this)||i.removeData(y)}}}var y="virtualMouseBindings",P="virtualTouchID",X="vmouseover vmousedown vmousemove vmouseup vclick vmouseout vmousecancel".split(" "),Y="clientX clientY pageX pageY screenX screenY".split(" "),E=t.event.mouseHooks?t.event.mouseHooks.props:[],I=t.event.props.concat(E),M={},B=0,N=0,x=0,H=!1,L=[],S=!1,V=!1,j="addEventListener"in n,Q=t(n),q=1,z=0;t.vmouse={moveDistanceThreshold:10,clickDistanceThreshold:10,resetTimerDuration:1500};for(var A=0;A<X.length;A++)t.event.special[X[A]]=w(X[A]);j&&n.addEventListener("click",function(e){var n,o,a,i,r,u,s=L.length,c=e.target;if(s)for(n=e.clientX,o=e.clientY,threshold=t.vmouse.clickDistanceThreshold,a=c;a;){for(i=0;s>i;i++)if(r=L[i],u=0,a===c&&Math.abs(r.x-n)<threshold&&Math.abs(r.y-o)<threshold||t.data(a,P)===r.touchID)return e.preventDefault(),void e.stopPropagation();a=a.parentNode}},!0)}(jQuery,window,document);
},{}]},{},[1]);
