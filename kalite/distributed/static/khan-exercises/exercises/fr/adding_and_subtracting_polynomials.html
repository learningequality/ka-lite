<!DOCTYPE html>
<html data-require="math math-format polynomials functional">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>Ajouter ou soustraire des polynômes</title>
<script src="../khan-exercise.js"></script>
</head>
<body>
    <div class="exercise">
        <div class="vars">
            <var id="X">randVar()</var>
            <var id="MAX_DEGREE">7</var>
            <var id="COLORS">[BLUE, RED, GREEN, PURPLE]</var>
            <var id="N">2 + (random() &lt; 0.25 ? 1 : 0)</var>
            <var id="SIGNS">[randFromArray(["-", "+"]), randFromArray(["-", "+"])].slice(0, N - 1)</var>
            <var id="DISTRIBUTE">_.any(SIGNS, function(s) { return s === "-"; })</var>
            <var id="TERMS">_(N).times(function(term) { return randRange(2, 5 - N); })</var>
            <var id="NON_ZERO_INDICES">randRangeUnique(1, MAX_DEGREE, 4)</var>
            <var id="SORTED_INDICES">NON_ZERO_INDICES.sort(function(a, b) {return b - a; })</var>
            <var id="POLYNOMIALS">tabulate(function(e){for(var r=[],i=shuffle(NON_ZERO_INDICES).slice(0,TERMS[e]),n=0;MAX_DEGREE&gt;=n;n++)r[n]=-1!==i.indexOf(n)?randRangeNonZero(-7,7):0;return new Polynomial(0,MAX_DEGREE,r,X)},N)</var>
            <var id="SOLUTION">function(){for(var e=POLYNOMIALS[0],r=1;N&gt;r;r++)e=e.add(POLYNOMIALS[r]);return e}()</var>
            <var id="COEFFICIENTS">function(){for(var e=[[],[],[],[]],r=[],n=0;4&gt;n;n++){for(var i=0;i&lt;POLYNOMIALS.length;i++){var a=POLYNOMIALS[i].coefs[SORTED_INDICES[n]];0!==a&amp;&amp;e[n].push(a)}0===e[n].length&amp;&amp;r.push(n)}r.sort(function(e,r){return r-e});for(var i=0;i&lt;r.length;i++)e.splice(r[i],1),SORTED_INDICES.splice(r[i],1);return e}()</var>
        </div>

        <div class="problems">
            <div>
                <p class="question">Simplifier l'expression.</p>
                <p class="problem"><code>
                    (<var>POLYNOMIALS[0]</var>) <var>SIGNS[0]</var>
                        (<span data-if="SIGNS[0] === '+'"><var>POLYNOMIALS[1]</var></span>
                         <span data-else=""><var>POLYNOMIALS[1].multiply(-1)</var></span>)
                    <span data-if="N === 3"> <var>SIGNS[1]</var>
                        (<span data-if="SIGNS[1] === '+'"><var>POLYNOMIALS[2]</var></span>
                         <span data-else=""><var>POLYNOMIALS[2].multiply(-1)</var></span>)
                    </span>
                </code></p>
                <p class="solution" data-type="expression" data-simplify><var>SOLUTION.parsableText()</var></p>
            </div>
        </div>

        <div class="hints">
            <div data-if="DISTRIBUTE">
                <p>On prend les opposés des termes de la parenthèse.</p>
                <p><code>(<var>POLYNOMIALS[0]</var>) + (<var>POLYNOMIALS[1]</var>)<span data-if="N === 3"> + (<var>POLYNOMIALS[2]</var>)</span></code></p>
            </div>

            <div>
                <p>Puisque l'on additionne, on peut simplement retirer les parenthèses.</p>
                <p><code><var>POLYNOMIALS[0]</var> + <var>POLYNOMIALS[1]</var><span data-if="N === 3"> + <var>POLYNOMIALS[2]</var></span></code></p>
            </div>

            <div>
                <p>On identifie les termes semblables.</p>
                <p><code>
                    <span data-each="POLYNOMIALS as POL">
                        <span data-each="SORTED_INDICES as n, index" data-unwrap="">
                            <span data-if="POL.coefs[index] !== 0">
                                <var>(POL.coefs[index] &lt; 0) ? "-" : (n === 0 &amp;&amp; POL === POLYNOMIALS[0]) ? "" : "+"</var>
                                \color{<var>COLORS[ n ]</var>}{<var>abs(POL.coefs[index]) === 1 ? "" : abs(POL.coefs[index])</var>
                                <var>X</var>^<var>index</var>}
                            </span>
                        </span>
                    </span>
                </code></p>
            </div>

            <div>
                <p>On regroupe les termes semblables.</p>
                <p><code>
                    <span data-each="COEFFICIENTS as index1, coeff">
                        <span data-if="coeff.length &gt; 0">
                            <span data-if="index1 !== 0"> + </span>\color{<var>COLORS[index1]</var>}{
                            <span data-if="coeff.length === 1">
                                <span data-if="coeff[0] !== 1"><var>coeff[0]</var></span>
                            </span>
                            <span data-else="">(
                                <span data-each="coeff as index2, TERM">
                                    <span data-if="index2 !== 0">
                                        <span data-if="TERM &gt; 0">+</span>
                                    </span><var>TERM</var>
                                </span>)
                            </span>
                            <var>X</var>^<var>SORTED_INDICES[index1]</var>}
                        </span>
                    </span>
                </code></p>
            </div>

            <div>
                <p>On additionne les coefficients.</p>
                <p><code><var>SOLUTION</var></code></p>
            </div>
        </div>
    </div>
</body>
</html>
