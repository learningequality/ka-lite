<!DOCTYPE html>
<html data-require="math math-format graphie interactive">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>Estimation de la ligne de régression</title>
<script src="../khan-exercise.js"></script><style type="text/css">
        .graphie.float {
            float: left;
            margin-right: 10px;
        }
    </style>
</head>
<body>
<div class="exercise">
    <div class="problems">
        <div id="linear" data-weight="3">
            <div class="vars" data-ensure="VALIDATOR(REALSLOPE, REALINTERCEPT)">
                <var id="SLOPE">randFromArray([-1, 1]) * randRange(10, 80) / 20</var>
                <var id="INTERCEPT">randRange(-5, 5)</var>
                <var id="FUNC">function(x) { return SLOPE * x + INTERCEPT }</var>
                <var id="TOP">((SLOPE &lt; 0 ? -1 : 1) * 11 - INTERCEPT) / SLOPE</var>
                <var id="BOTTOM">((SLOPE &lt; 0 ? 1 : -1) * 11 - INTERCEPT) / SLOPE</var>
                <var id="BOUND">function(e,r,n){return r&gt;e?r:e&gt;n?n:e}</var>
                <var id="OFFSET">random() + 0.5</var>
                <var id="LEFT">(BOTTOM &lt; -11) ? -11 : BOTTOM</var>
                <var id="RIGHT">(TOP &gt; 11) ? 11 : TOP</var>
                <var id="XS">sortNumbers(function(){var e=(RIGHT-LEFT)/20;return _.map(shuffle(_.range(-8,9),9),function(r){return r*e})}())</var>
                <var id="UNIQARRAYS">function(e){for(var r=0;r&lt;e.length;++r)for(var n=r+1;n&lt;e.length;++n)_.isEqual(e[r],e[n])&amp;&amp;(e.splice(n,1),--n);return e}</var>
                <var id="ANG">atan2(SLOPE, 1) + PI / 2</var>
                <var id="TOTALOFFSET">[]</var>
                <var id="POINTS">UNIQARRAYS(_.map(XS,function(e,r){var n,t=_.reduce(TOTALOFFSET,function(e,r){return e+r},0),a=function(e,r){return random()*(r-e)+e};return n=2&gt;r||r&gt;6?a(OFFSET/2,OFFSET):0&gt;t?a(-OFFSET-t,OFFSET):a(-OFFSET,OFFSET-t),TOTALOFFSET.push(n),[BOUND(round(e+cos(ANG)*n),-9,9),BOUND(round(FUNC(e)+sin(ANG)*n),-9,9)]}))</var>
                <var id="REALSLOPE, REALINTERCEPT, R2">function(){var e=POINTS.length,r=_.reduce(POINTS,function(e,r){return e+r[0]},0)/e,n=pow(r,2),t=_.reduce(POINTS,function(e,r){return e+r[1]},0)/e,a=pow(t,2),o=_.reduce(POINTS,function(e,r){return e+pow(r[0],2)},0),s=_.reduce(POINTS,function(e,r){return e+pow(r[1],2)},0),i=_.reduce(POINTS,function(e,r){return e+r[0]*r[1]},0),l=i-e*r*t,c=(t*o-r*i)/(o-e*n),E=l/(o-e*n),u=e/(e-1),p=u*pow(o/e-n,.5),N=u*pow(s/e-a,.5),h=(_.map(POINTS,function(e){return e[0]}),l/((e-1)*p*N));return[E,c,h]}()</var>
                <var id="GRAPH">{}</var>
                <var id="VALIDATOR">function(e,r){var n=_.first(POINTS),t=_.last(POINTS),a=1/REALSLOPE+REALSLOPE;lowx=(1/REALSLOPE*n[0]+n[1]-REALINTERCEPT)/a,highx=(1/REALSLOPE*t[0]+t[1]-REALINTERCEPT)/a;var o=function(e){return-1/REALSLOPE*(e-n[0])+n[1]},s=function(e){return-1/REALSLOPE*(e-t[0])+t[1]};lowIntersectx=(1/REALSLOPE*n[0]+n[1]-r)/(e+1/REALSLOPE),highIntersectx=(1/REALSLOPE*t[0]+t[1]-r)/(e+1/REALSLOPE);var i=sqrt(pow(o(lowx)-o(lowIntersectx),2)+pow(lowx-lowIntersectx,2)),l=sqrt(pow(s(highx)-s(highIntersectx),2)+pow(highx-highIntersectx,2)),c=_.map(POINTS,function(n){var t=n[0],a=n[1],o=e*t+r;return a&gt;=o?1:-1}),E=sortNumbers(c),u=E.slice(0).reverse();return!_.isEqual(c,E)&amp;&amp;!_.isEqual(c,u)&amp;&amp;_.include(c,1)&amp;&amp;_.include(c,-1)&amp;&amp;1.3*OFFSET&gt;i&amp;&amp;1.3*OFFSET&gt;l}</var>
            </div>

            <p class="question">Fit a line to the data or mark that no line fits the data well.</p>
            <div class="problem">
                <div class="graphie">graphInit({range:11,scale:20,axisArrows:"&lt;-&gt;",tickStep:1,labelStep:1,gridOpacity:.05,axisOpacity:.2,tickOpacity:.4,labelOpacity:.5}),addMouseLayer(),_.each(POINTS,function(e){circle(e,.2,{fill:"black"})}),graph.pointA=addMovablePoint({coord:[-5,5],snapX:.5,snapY:.5,normalStyle:{stroke:KhanUtil.BLUE,fill:KhanUtil.BLUE}}),graph.pointB=addMovablePoint({coord:[5,5],snapX:.5,snapY:.5,normalStyle:{stroke:KhanUtil.BLUE,fill:KhanUtil.BLUE}}),graph.bestFitLine=addMovableLineSegment({pointA:graph.pointA,pointZ:graph.pointB,fixed:!0,extendLine:!0}),graph.pointA.onMove=function(e,r){return e!=graph.pointB.coord[0]||r!=graph.pointB.coord[1]},graph.pointB.onMove=function(e,r){return e!=graph.pointA.coord[0]||r!=graph.pointA.coord[1]},graph.pointA.toFront(),graph.pointB.toFront();var shown=!1;graph.showLine=function(){graph.pointA.visibleShape.show(),graph.pointA.mouseTarget.show(),graph.pointB.visibleShape.show(),graph.pointB.mouseTarget.show(),graph.bestFitLine.show()},graph.hideLine=function(){graph.pointA.visibleShape.hide(),graph.pointA.mouseTarget.hide(),graph.pointB.visibleShape.hide(),graph.pointB.mouseTarget.hide(),graph.bestFitLine.hide()},graph.showSolution=function(){if(!shown){shown=!0;var e=function(e){return REALSLOPE*e+REALINTERCEPT};$("html, body").animate({scrollTop:$(".question").offset().top},{duration:500,easing:"swing",complete:function(){line([-11,e(-11)],[11,e(11)],{stroke:ORANGE,opacity:0}).animate({opacity:1},750)}})}},GRAPH=graph</div>
            </div>

            <div class="solution" data-type="custom">
                <div class="instruction">
                    Move the line on the graph to fit the data if appropriate.
                    <ul>
<li>
                            <label>
                                <input id="exists" checked name="linear" onclick="KhanUtil.tmpl.getVAR('GRAPH').showLine()" type="radio"><span>A line fits the data well</span>
                            </label>
                        </li>
                        <li>
                            <label>
                                <input id="notexists" name="linear" onclick="KhanUtil.tmpl.getVAR('GRAPH').hideLine()" type="radio"><span>No line fits the data well</span>
                            </label>
                        </li>
                    </ul>
</div>
                <div class="guess">[GRAPH.pointA.coord,GRAPH.pointB.coord,$("input[name='linear']:checked").attr("id")]</div>
                <div class="validator-function">if(_.isEqual(guess,[[-5,5],[5,5],"exists"]))return"";if("exists"!==guess[2])return!1;var e=(guess[1][1]-guess[0][1])/(guess[1][0]-guess[0][0]),r=e*-guess[0][0]+guess[0][1];return VALIDATOR(e,r)</div>
                <div class="show-guess">GRAPH.pointA.setCoord(guess[0]),GRAPH.pointB.setCoord(guess[1]),GRAPH.bestFitLine.transform(!0)</div>
                <div class="show-guess-solutionarea">$("#"+guess[2]).attr("checked","checked")</div>
            </div>

            <div class="hints">
                <p>A line of fit is a line that approximates the data points.</p>
                <div>
                    <p>Il y a trois critères principaux à respecter pour tracer une droite d'ajustement.</p>
                    <p>Tout d'abord, assurez-vous que votre ligne passe par les points et ne se trouve pas complètement au-dessus ou en dessous des points.</p>
                    <div class="clearfix">
                        <div class="graphie float">init({range:[[-5,5],[-5,5]],scale:[20,20]}),circle([-2,-3],.2,{fill:"black"}),circle([0,-1],.2,{fill:"black"}),circle([-1,1],.2,{fill:"black"}),circle([1,1],.2,{fill:"black"}),circle([0,2],.2,{fill:"black"}),line([-5,-4],[5,-3],{stroke:BLUE}),label([0,4],$._("Mauvais"),"center",!1).css("color","red").css("font-size","20px")</div>
                        <div class="graphie float">init({range:[[-5,5],[-5,5]],scale:[20,20]}),circle([-2,-3],.2,{fill:"black"}),circle([0,-1],.2,{fill:"black"}),circle([-1,1],.2,{fill:"black"}),circle([1,1],.2,{fill:"black"}),circle([0,2],.2,{fill:"black"}),line([-5,-2.5],[5,-1.5],{stroke:BLUE}),label([0,4],$._("OK"),"center",!1).css("color","orange").css("font-size","20px")</div>
                    </div>
                </div>
                <div>
                    <p>Ensuite, assurez-vous que votre ligne alterne entre passer au-dessus, puis au-dessous des points, et qu'elle ne passe pas simplement au-dessus de quelques points et en dessous du reste.</p>
                    <div class="clearfix">
                        <div class="graphie float">init({range:[[-5,5],[-5,5]],scale:[20,20]}),circle([-2,-3],.2,{fill:"black"}),circle([0,-1],.2,{fill:"black"}),circle([-1,1],.2,{fill:"black"}),circle([1,1],.2,{fill:"black"}),circle([0,2],.2,{fill:"black"}),line([-5,-2.5],[5,-1.5],{stroke:BLUE}),label([0,4],$._("OK"),"center",!1).css("color","orange").css("font-size","20px")</div>
                        <div class="graphie float">init({range:[[-5,5],[-5,5]],scale:[20,20]}),circle([-2,-3],.2,{fill:"black"}),circle([0,-1],.2,{fill:"black"}),circle([-1,1],.2,{fill:"black"}),circle([1,1],.2,{fill:"black"}),circle([0,2],.2,{fill:"black"}),line([-5,-3.5],[3,5],{stroke:BLUE}),label([0,4],$._("Mieux"),"center",!1).css("color","#8EEB00").css("font-size","20px")</div>
                    </div>
                </div>
                <div>
                    <p>Finally, make sure that the line goes through the middle
                        of all the points, so that it is close to all of the points.</p>
                    <div class="clearfix">
                        <div class="graphie float">init({range:[[-5,5],[-5,5]],scale:[20,20]}),circle([-2,-3],.2,{fill:"black"}),circle([0,-1],.2,{fill:"black"}),circle([-1,1],.2,{fill:"black"}),circle([1,1],.2,{fill:"black"}),circle([0,2],.2,{fill:"black"}),line([-5,-3.5],[3,5],{stroke:BLUE}),label([0,4],$._("Mieux"),"center",!1).css("color","#9FEE00").css("font-size","20px")</div>
                        <div class="graphie float">init({range:[[-5,5],[-5,5]],scale:[20,20]}),circle([-2,-3],.2,{fill:"black"}),circle([0,-1],.2,{fill:"black"}),circle([-1,1],.2,{fill:"black"}),circle([1,1],.2,{fill:"black"}),circle([0,2],.2,{fill:"black"}),line([-4,-5],[3,5],{stroke:BLUE}),label([0,4],$._("Bon"),"center",!1).css("color","#00C322").css("font-size","20px")</div>
                    </div>
                </div>
                <p>
                    There are several lines that satisfy this.
                    <a class="simple-button" href="javascript:void(0)" onclick="javascript:KhanUtil.tmpl.getVAR('GRAPH').showSolution()">
                            Click here
                    </a>
                    to show one of them.
                </p>
            </div>
        </div>

        <div id="nonlinear" data-type="linear" data-weight="1">
            <div class="vars" data-ensure="abs(R2) &lt; 0.36">
                <var id="SLOPE">0</var>
                <var id="INTERCEPT">0</var>
                <var id="OFFSET">11</var>
                <var id="GRAPH">{}</var>
            </div>

            <div class="solution" data-type="custom">
                <div class="instruction">
                    Move the line on the graph to fit the data if appropriate.
                    <ul>
<li>
                            <label>
                                <input id="exists" checked name="nonlinear" onclick="KhanUtil.tmpl.getVAR('GRAPH').showLine()" type="radio"><span>A line fits the data well</span>
                            </label>
                        </li>
                        <li>
                            <label>
                                <input id="notexists" name="nonlinear" onclick="KhanUtil.tmpl.getVAR('GRAPH').hideLine()" type="radio"><span>No line fits the data well</span>
                            </label>
                        </li>
                    </ul>
</div>
                <div class="guess">[GRAPH.pointA.coord,GRAPH.pointB.coord,$("input[name='nonlinear']:checked").attr("id")]</div>
                <div class="validator-function">return _.isEqual(guess,[[-5,5],[5,5],"exists"])?"":"notexists"===guess[2]</div>
                <div class="show-guess">GRAPH.pointA.setCoord(guess[0]),GRAPH.pointB.setCoord(guess[1]),GRAPH.bestFitLine.transform(!0)</div>
                <div class="show-guess-solutionarea">$("#"+guess[2]).attr("checked","checked")</div>
            </div>

            <div class="hints">
                <p>Does the data look like it follows a linear relationship?</p>
                <p>The data is mostly random, so there is no line that fits the data well.</p>
            </div>
        </div>

        <div id="two-slopes" data-type="linear" data-weight="1">
            <div class="vars" data-ensure="abs(R2) &lt; 0.36">
                <var id="BREAK">randRange(-3, 3)</var>
                <var id="SLOPE1">randRange(-25, 25) / 10</var>
                <var id="SLOPE2" data-ensure="abs(SLOPE1 - SLOPE2) &gt; 1.5">randRange(-30, 30) / 10</var>
                <var id="GETPOINTS">function(e,r,n){for(var t=[],a=(e+r)/2,s=randRange(2*abs(n)-8,8-2*abs(n)),o=[];r&gt;e;)o.push(e++);o=shuffle(o);for(var i=randRange(4,5),l=0;l&lt;o.length;l++){var c=(o[l]-a)*n+s+2*random()-1;if(abs(c)&lt;10&amp;&amp;(t.push([o[l],round(c)]),t.length===i))break}return t}</var>
                <var id="POINTS1">GETPOINTS(-10, BREAK - 1, SLOPE1)</var>
                <var id="POINTS2">GETPOINTS(BREAK + 1, 10, SLOPE2)</var>
                <var id="POINTS">[].concat(POINTS1).concat(POINTS2)</var>
            </div>

            <div class="solution" data-type="custom">
                <div class="instruction">
                    Move the line on the graph to fit the data if appropriate.
                    <ul>
<li>
                            <label>
                                <input id="exists" checked name="nonlinear" onclick="KhanUtil.tmpl.getVAR('GRAPH').showLine()" type="radio"><span>A line fits the data well</span>
                            </label>
                        </li>
                        <li>
                            <label>
                                <input id="notexists" name="nonlinear" onclick="KhanUtil.tmpl.getVAR('GRAPH').hideLine()" type="radio"><span>No line fits the data well</span>
                            </label>
                        </li>
                    </ul>
</div>
                <div class="guess">[GRAPH.pointA.coord,GRAPH.pointB.coord,$("input[name='nonlinear']:checked").attr("id")]</div>
                <div class="validator-function">return _.isEqual(guess,[[-5,5],[5,5],"exists"])?"":"notexists"===guess[2]</div>
                <div class="show-guess">GRAPH.pointA.setCoord(guess[0]),GRAPH.pointB.setCoord(guess[1]),GRAPH.bestFitLine.transform(!0)</div>
                <div class="show-guess-solutionarea">$("#"+guess[2]).attr("checked","checked")</div>
            </div>

            <div class="hints">
                <p>Does the data look like it follows a linear relationship?</p>
                <p>The data forms two separate linear trends, so there is no single line that fits the data well.</p>
            </div>
        </div>

        <div id="parabola" data-type="linear" data-weight="1">
            <div class="vars" data-ensure="abs(R2) &lt; 0.36">
                <var id="GETPOINTS">function(){var e=shuffle([-10,-9,-8,-7,-6,-5,-4,-3,-2,-1,0,1,2,3,4,5,6,7,8,9,10]),r=randRange(9,12),n=randRange(4,10),t=randRange(-10,10)/10,a=randRange(-8,8);a&gt;2?n*=-1:a&gt;-2&amp;&amp;(n*=randFromArray([-1,1]));for(var s=[],o=0;o&lt;e.length;o++){var i=e[o],l=round(i*i/n+t*i+a+2*random()-1);if(abs(l)&lt;10&amp;&amp;(s.push([i,l]),s.length===r))break}return s}</var>
                <var id="POINTS1">GETPOINTS()</var>
                <var id="POINTS">[].concat(POINTS1)</var>
            </div>

            <div class="solution" data-type="custom">
                <div class="instruction">
                    Move the line on the graph to fit the data if appropriate.
                    <ul>
<li>
                            <label>
                                <input id="exists" checked name="nonlinear" onclick="KhanUtil.tmpl.getVAR('GRAPH').showLine()" type="radio"><span>A line fits the data well</span>
                            </label>
                        </li>
                        <li>
                            <label>
                                <input id="notexists" name="nonlinear" onclick="KhanUtil.tmpl.getVAR('GRAPH').hideLine()" type="radio"><span>No line fits the data well</span>
                            </label>
                        </li>
                    </ul>
</div>
                <div class="guess">[GRAPH.pointA.coord,GRAPH.pointB.coord,$("input[name='nonlinear']:checked").attr("id")]</div>
                <div class="validator-function">return _.isEqual(guess,[[-5,5],[5,5],"exists"])?"":"notexists"===guess[2]</div>
                <div class="show-guess">GRAPH.pointA.setCoord(guess[0]),GRAPH.pointB.setCoord(guess[1]),GRAPH.bestFitLine.transform(!0)</div>
                <div class="show-guess-solutionarea">$("#"+guess[2]).attr("checked","checked")</div>
            </div>

            <div class="hints">
                <p>Does the data look like it follows a linear relationship?</p>
                <p>The data does not form a linear trend, so there is no single line that fits the data well.</p>
            </div>
        </div>
    </div>
</div>
</body>
</html>
