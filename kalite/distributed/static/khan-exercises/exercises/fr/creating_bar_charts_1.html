<!DOCTYPE html>
<html data-require="math math-format expressions graphie interactive word-problems stat">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>Créer un graphique avec des barres 1</title>
<script src="../khan-exercise.js"></script><style>
        span.rotate  {
            -moz-transform: rotate(-90deg);
            -o-transform: rotate(-90deg);
            -webkit-transform: rotate(-90deg);
            -ms-filter: "progid:DXImageTransform.Microsoft.BasicImage(rotation=3)";
        }
        body.ie span.rotate {
            left: 60px !important;
            top: 140px !important;
        }
    </style>
</head>
<body>
<div class="exercise">
    <div class="problems">
        <div>
            <div class="vars">
                <var id="SUBJECT,SUBJECT_FUNC">randFromArray([[new Plural(function(e){return $.ngettext("animal","animals",e)}),KhanUtil.animal],[new Plural(function(e){return $.ngettext({lang:"fr",messages:["color","couleurs"]},e)}),KhanUtil.color],[new Plural(function(e){return $.ngettext("fruit","fruits",e)}),KhanUtil.fruit],[new Plural(function(e){return $.ngettext("course","courses",e)}),KhanUtil.course]])</var>
                <var id="CATEGORIES">_.times(5, function(n) { return SUBJECT_FUNC(n + 1); } )</var>
                <var id="DATA">_.times(5, function() { return randRange(0, 10); } )</var>
                <var id="TOTAL">sum(DATA)</var>
                <var id="RESPONDENT">randFromArray([new Plural(function(e){return $.ngettext({lang:"fr",messages:["élève","élèves"]},e)}),new Plural(function(e){return $.ngettext("teacher","teachers",e)}),new Plural(function(e){return $.ngettext({lang:"fr",messages:["person","personnes"]},e)})])</var>
                <var id="SHUFFLED">shuffle(_.zip(DATA, CATEGORIES))</var>
            </div>

            <p>
                <span data-if="isSingular(TOTAL)">
                    <code><var>TOTAL</var></code> <var>RESPONDENT</var> was asked about their favorite <var>SUBJECT</var>.
                </span>
                <span data-each="SHUFFLED as DATA">
                    <span data-if="isSingular(DATA[0])">
                        <code><var>DATA[0]</var></code> <var>RESPONDENT</var> said <var>DATA[1]</var>.
                    </span>
                </span>
            </p>

            <p class="question">Create a bar chart showing everyone's favorite <var>plural_form(SUBJECT)</var>:</p>

            <div class="problem">

                <div class="graphie" id="barchart">init({range:[[-2,17],[-3,12]],scale:[26,30]}),addMouseLayer();for(var y=0;10&gt;=y;++y)label([0,y],y,"left",!1),style({stroke:"#000",strokeWidth:1,opacity:.3},function(){line([0,y],[16,y])});graph.leftPoints=[],graph.rightPoints=[],graph.lines=[];for(var index=0;index&lt;CATEGORIES.length;++index){graph.leftPoints[index]=addMovablePoint({coord:[3*index+1,.5],visible:!1}),graph.rightPoints[index]=addMovablePoint({coord:[3*index+3,.5],visible:!1}),graph.lines[index]=addMovableLineSegment({pointA:graph.leftPoints[index],pointZ:graph.rightPoints[index],snapY:.5,constraints:{constrainX:!0}}),style({stroke:"none",fill:"#9ab8ed",opacity:1},function(){graph.lines[index].bar=path([[3*index+1,0],[3*index+1,.5],[3*index+3,.5],[3*index+3,0],[3*index+1,0]])}),label([3*index+2,0],CATEGORIES[index]+"","below",!1).css("text-transform","capitalize");var bar=index;graph.lines[index].onMove=function(e,r){(this.coordA[1]&lt;0||this.coordA[1]&gt;10)&amp;&amp;(this.coordA[1]-=r,this.coordZ[1]-=r),this.pointA.setCoord([this.pointA.coord[0],this.coordA[1]]),this.pointZ.setCoord([this.pointZ.coord[0],this.coordA[1]]),this.pointA.updateLineEnds(),this.pointZ.updateLineEnds(),this.bar.scale(1,Math.max(.01,2*this.coordA[1]),scalePoint(0)[0],scalePoint(0)[1])}}style({stroke:"#000",strokeWidth:2,opacity:1},function(){line([0,0],[16,0]),line([0,0],[0,10])}),label([8,-.8],SUBJECT+"","below",!1).css("text-transform","capitalize").css("font-weight","bold"),label([-1.5,5],$._("Number of %(respondent)s",{respondent:plural_form(RESPONDENT)}),"center",!1).css("font-weight","bold").addClass("rotate"),label([8,10.5],$._("Favorite %(subject)s",{subject:plural_form(SUBJECT)}),"above",!1).css("font-weight","bold")</div>

            </div>
            <div class="solution" data-type="custom">
                <div class="instruction">
                    Create a bar chart by dragging the top of each bar up and down.
                </div>
                <div class="guess">_.times(5,function(e){return graph.lines[e].coordA[1]})</div>
                <div class="validator-function">return _.isEqual(guess,[.5,.5,.5,.5,.5])?"":_.isEqual(guess,DATA)</div>
                <div class="show-guess">$.each(guess,function(e){graph.lines[e].pointA.setCoord([graph.lines[e].pointA.coord[0],this]),graph.lines[e].pointZ.setCoord([graph.lines[e].pointZ.coord[0],this]),graph.lines[e].pointA.updateLineEnds(),graph.lines[e].pointZ.updateLineEnds(),graph.lines[e].bar.scale(1,Math.max(.01,2*this),scalePoint(0)[0],scalePoint(0)[1])})</div>
            </div>
        </div>
    </div>

    <div class="hints">
        <div data-each="DATA as INDEX, NUM">
            <p>
                <span data-if="isSingular(NUM)">
                    <code><var>NUM</var></code> <var>RESPONDENT</var> said their
                    favorite <var>SUBJECT</var> was <var>CATEGORIES[ INDEX ]</var>.
                </span>
                <span data-if="NUM &gt; 0">
                    So the top of the bar for
                    "<span style="text-transform: capitalize"><var>CATEGORIES[ INDEX ]</var></span>"
                    should line up with the number
                    <code><var>NUM</var></code> on the left side of the chart.
                </span><span data-else>
                    So there should be no bar above
                    "<span style="text-transform: capitalize"><var>CATEGORIES[ INDEX ]</var></span>".
                    Drag the top of the bar all the way to the bottom to get
                    rid of the bar.
                </span>
            </p>
            <div class="graphie" data-if="NUM &gt; 0" data-update="barchart">style({stroke:ORANGE,fill:"none",strokeWidth:1,strokeDasharray:"- "},function(){path([[3*INDEX+1,0],[3*INDEX+1,NUM],[3*INDEX+3,NUM],[3*INDEX+3,0]]).toBack()})</div>
        </div>
    </div>

</div>
</body>
</html>
