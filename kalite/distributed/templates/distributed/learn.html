{% extends "distributed/base.html" %}
{% load my_filters i18n i18n_filters staticfiles compress %}

{% block title %}{% trans "Learn" %}{% endblock title %}

{% block headcss %}{{ block.super }}

    <style id="exercise-inline-style"></style> <!-- Used by KA to dynamically add styling to the exercise -->

    <style type="text/css">
        /* Overridding bootstrap back to defaults to make perseus looking good */
        ul {
            list-style-type: none;
            margin-left: -8px;
        }
        .checkbox, .checkbox > input {
            padding-left: 0;
            float: none !important;
        }
        #workarea .perseus-widget-container ul.blank-background {
            background-color: #F7F7F7 !important;
        }
    </style>

    {% if load_perseus_assets %}
        <!-- START PERSEUS STUFF -->
        {% compress css file perseuscss %}
        <link rel="stylesheet" type="text/css" href="{% static 'js/distributed/perseus/ke/css/khan-exercise.css' %}">
        <link rel="stylesheet" type="text/css" href="{% static 'css/distributed/video-js.css' %}">
        <link rel="stylesheet" type="text/css" href="{% static "js/distributed/perseus/lib/katex/katex.min.css" %}" />
        <link rel="stylesheet" type="text/css" href="{% static "js/distributed/perseus/lib/mathquill/mathquill.css" %}" />
        <link rel="stylesheet" type="text/css" href="{% static "js/distributed/perseus/build/perseus-3.css" %}" />
        <link rel="stylesheet" type="text/css" href="{% static 'css/distributed/video-js-override.css' %}">
        {% endcompress %}
        <!-- END PERSEUS STUFF -->
    {% endif %}
    
    {% compress css file learncss %}
    <link href="{% static "css/distributed/sidebar.css" %}" rel="stylesheet" type="text/css">
    <link href="{% static "css/distributed/content.css" %}" rel="stylesheet" type="text/css">

    <link href="{% static "css/distributed/audio.css" %}" rel="stylesheet" type="text/css">

    <link href="{% static "pdfjs/web/viewer.css" %}" rel="stylesheet" type="text/css">

    {% endcompress %}

{% endblock headcss %}

{% block headjs %}{{ block.super }}

    <script>
        window.ALL_TOPICS_URL = "{% url 'topic_tree' channel='%(channel_name)s' %}"; 
    </script>
    
    <script src="{% static 'js/seedrandom.min.js' %}"></script>

    <script src="{% static 'js/distributed/bundles/bundle_learn.js' %}"></script>
    <script src="{% static "js/distributed/perseus/ke/third_party/MathJax/2.1/MathJax.js" True %}?config={% static "js/distributed/perseus/ke/third_party/MathJax/2.1/config/KAthJax-8f02f65cba7722b3e529bd9dfa6ac25d" %}"></script>
    <script src="{% static 'js/jquery.slimscroll.min.js' %}"></script>


    <script type="text/javascript">
        var bundle = require("learn");
        bundle.$(function() {
            window.channel_router = new bundle.TopicChannelRouter({default_channel: "{{ channel }}"})
            bundle.Backbone.history.start({pushState: true, root: "{% url 'learn' %}"});
        });
    </script>

{% endblock headjs %}

{% block content %}
    {{ block.super }}
    <div id="content-area">
    </div>
    <div id="sidebar-container">
    </div>
{% endblock content %}
